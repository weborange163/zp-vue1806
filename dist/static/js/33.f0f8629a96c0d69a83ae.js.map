{"version":3,"sources":["webpack:///src/pages/video-add.vue","webpack:///./src/pages/video-add.vue?dd82","webpack:///./src/pages/video-add.vue"],"names":["_this","this","required","validator","callback","trigger","message","min","max","value","_this2","Object","auth","data","argu","_this3","pause","done","_this4","getUEContent","content","file","_this5","FormData","clearValidate","msg","fileList","filelist","name","res","fileListVideo","submit","_this6","valid","tokenId","title","userId","columnId","status","videoId","close","coverNum","url","_this7","then","_","catch","next","pages_video_add","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","min-width","attrs","center","width","visible","showDia","append-to-body","before-close","handleClose","on","update:visible","$event","ref","form2","label-width","background","id","height","controls","src","showUrl","type","_v","line-height","font-size","border-radius","display","float","margin-right","__webpack_require__","alt","_s","form1","author","updateTime","domProps","innerHTML","padding","separator-class","to","path","size","click","fanhui","showPre","creatVideo","model","rules","rules1","margin-left","label","prop","autosize","placeholder","$$v","$set","expression","rows","limit","action","accept","on-remove","handleRemove2","before-upload","beforeUpload","http-request","uploadVideo","on-progress","uploading","file-list","on-success","handleSuccess","on-exceed","exceedFile","before-remove","beforeRemove","auto-upload","slot","loading","uploadVideoing1","disabled","uploadVideoing2","submitUpload","_e","filterable","_l","item","key","nickName","staticRenderFns","Component","normalizeComponent","video_add","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/33.f0f8629a96c0d69a83ae.js","sourcesContent":["<template>\n\t<div class=\"page-body news-add\" style=\"min-width:980px;\">\n    <el-dialog center width=\"375px\"  :visible.sync=\"showDia\" append-to-body :before-close=\"handleClose\">\n\t\t\t<el-form :data=\"form2\"  ref=\"form2\" label-width=\"110px\" class=\"form1 u_editor\">\n        <video id='myVideo' width=\"100%\" height=\"240\" controls style=\"background:rgba(0,0,0,0.7)\">\n          <source :src=\"showUrl\" type=\"video/mp4\">\n        </video>\n        <p class=\"marT20\" style=\"height:20px;line-height:20px;font-size:16px;\"><img src=\"@/assets/img/y4.png\" alt=\"\" style=\"width:20px;height:20px;border-radius:50%;display:block;float:left;margin-right:10px;\"><span>{{form1.author}}</span></p>\n\t\t\t\t<p class=\"title marT20\" >{{form1.title }}</p>\n        <p class=\"color9\">{{form1.updateTime}}</p>\n        <p class=\"content\" v-html=\"form1.content\"></p>\n\t\t\t</el-form>\n\t\t</el-dialog>\n\t\t<div class=\"breadcrumb\" style=\"padding:8px;\">\n\t\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\n\t\t\t\t<el-breadcrumb-item :to=\"{ path: '/' }\">内容中心</el-breadcrumb-item>\n\t\t\t\t<el-breadcrumb-item>发布内容</el-breadcrumb-item>\n\t\t\t\t<el-breadcrumb-item>发布视频</el-breadcrumb-item>\n\t\t\t</el-breadcrumb>\n\t\t</div>\n\t\t<div class=\"box\">\n\t\t\t<div class=\"text-right marR100\">\n\t\t\t\t<el-button size=\"small\" @click=\"fanhui\" class=\"light_btn\">返回</el-button>\n        <el-button size=\"small\" class=\"light_btn\" @click=\"showPre\" >预览</el-button>\n\t\t\t\t<el-button size=\"small\" class=\"light_btn\"  @click=\"creatVideo('form1',0)\">仅保存</el-button>\n\t\t\t\t<el-button size=\"small\" class=\"light_btn\"  @click=\"creatVideo('form1','1')\">保存并提交审核</el-button>\n\t\t\t</div>\n      \n\t\t\t <el-form ref=\"form1\" :model=\"form1\" label-width=\"96px\" :rules=\"rules1\" class=\"up_form clearfix\">\n\t\t\t\t<div style=\"width: 48%;float: left;padding:15px;margin-left:2%;margin-right:5%;\">\n\t\t\t\t\t<el-form-item label=\"视频标题\" prop=\"title\" >\n\t\t\t\t\t\t<el-input type=\"textarea\" autosize v-model=\"form1.title\" placeholder=\"请输入标题\" style=\"width:420px;\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"视频简介\" class=\"editor\" prop=\"content\">\n\t\t\t\t\t\t<el-input type=\"textarea\"  v-model=\"form1.content\" :rows=\"6\" style=\"width:420px;\"></el-input>\n\t\t\t\t\t</el-form-item>\n          <el-form-item label=\"上传视频:\" prop='videoVali' ref='videoVali'>\n\t\t\t\t\t\t<el-upload\n              class=\"upload-demo\" :limit='1'\n              ref=\"uploadVideo1\" name=\"newsVideo\"\n              action=\"\" accept='video/mp4'\n              :on-remove=\"handleRemove2\" :before-upload='beforeUpload'\n              :http-request=\"uploadVideo\"\n              :on-progress=\"uploading\"\n              :file-list=\"fileListVideo\"\n              :on-success=\"handleSuccess\"\n              :on-exceed=\"exceedFile\"\n              :before-remove=\"beforeRemove\"\n              :auto-upload=\"false\">\n              <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取视频</el-button>\n              <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\" :loading=\"uploadVideoing1\" :disabled=\"uploadVideoing2\">点击上传视频</el-button>\n              <div slot=\"tip\" class=\"el-upload__tip\">请选择mp4文件进行上传</div>\n            </el-upload>\n\t\t\t\t\t</el-form-item>\n          <el-form-item label=\"视频预览:\" v-if=\"videoId\">\n\t\t\t\t\t\t<video width=\"320\" height=\"240\" controls style=\"background:rgba(0,0,0,0.7)\">\n               <source :src=\"showUrl\" type=\"video/mp4\">\n            </video>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"width: 35%;float:left;padding:15px;min-width:420px;\">\n          <el-form-item label=\"发布到:\" prop=\"columnId\">\n            <el-select filterable v-model=\"form1.columnId\" name=\"columnId\" placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in columnIds\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n\t\t\t\t\t<el-form-item class=\"fabuStyle\" label=\"发布账号:\" prop=\"userId\">\n\t\t\t\t\t\t<el-select filterable v-model=\"form1.userId\" placeholder=\"请选择发布账号\">\n\t\t\t\t\t\t\t<el-option \n                v-for=\"item in accounts\"\n                :key=\"item.userId\"\n                :label=\"item.nickName\"\n                :value=\"item.userId\"\n              ></el-option>\n\t\t\t\t\t\t</el-select>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"Tag标签:\" prop=\"tagLabels\">\n\t\t\t\t\t\t<el-input placeholder=\"用'，'隔开，单个标签小于12字节\" v-model=\"form1.tagLabels\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</div>\n\t\t\t</el-form> \n\t\t</div>\n\t</div>\n</template>\n<script>\n//import MQuillEditor from 'm-quill-editor'\nimport { getBaceUrl } from '@/utils/auth'\nimport myVali from '@/utils/myVali'\n\texport default{\n\t\tcomponents: {\n\t\t//\tMQuillEditor\n    },\n\t\tdata(){\n      var valiTag=(rule,value,callback) => {\n        if (value === '') {\n          callback();\n        } else {\n          console.log(value)\n          var v = value.replace(/，/ig,',');\n          var arr = v.split(',');\n          arr.map(item => {\n            if(item.replace(/[^\\x00-\\xff]/g,\"aa\").length>12){\n              callback(new Error('单个tag标签不能超过12字节!'))\n            }else{\n              callback();\n            }\n          })\n        }\n      };\n      var valiVideo= (rule, value, callback) => { // 视频验证\n        if (!this.videoId) {\n          callback(new Error('请上传视频'));\n        } else {\n          callback();\n        }\n      };\n\t\t\treturn{\n        uploadVideoing1:false,\n        uploadVideoing2:false,\n        formDatas:'',\n        accounts:[],\n        fileList:[],\n        fileListVideo:[],\n        showDia:false,\n        pkg:'',\n        form2:'',\n\t\t\t\tuploadData:{},\n\t\t\t\tbaceUrl:'',\n\t\t\t\t// content:'111',\n\t\t\t\tdialogImageUrl: '',\n        dialogVisible: false,\n        cities:[],\n        hasFmt:true,\n        showUrl:'',\n        argu:{},\n        videoUrl:'',\n        columnIds:'',\n        videoId:\"\",\n\t\t\t\tform1: {\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tcontent:'',\n          columnId:'',\n\t\t\t\t\tuserId:'',\n\t\t\t\t\ttagLabels:'',\n\t\t\t\t},\n\t\t\t\trules1: {\n          videoVali:[\n            {required:true, validator: valiVideo, trigger: 'change' }\n          ],\n          title: [\n            {required:true,  message: '请输入标题', trigger: 'blur' }, \n             { min: 1, max: 50, message: '长度在 50字以内', trigger: 'blur' } \n          ],\n          content: [\n            { required: true, message: '请输入内容', trigger: 'blur' },\n            { min: 1, max: 500, message: '长度在 500字以内', trigger: 'blur' }\n          ],\n          columnId:[\n            { required: true, message: '请选择来源', trigger: 'change'}\n          ],\n          userId: [\n            {required: true, message: '请选择发布账号', trigger: 'change' }\n          ],\n          tagLabels:[\n            { validator: valiTag, trigger: 'blur' }\n          ]\n        }\n\t\t\t}\n\t\t},\n\t\tcreated(){\n      this.baceUrl = getBaceUrl();\n      // this.videoUrl = this.baceUrl + '/news/addVideo';\n      // console.log(this.videoUrl);\n      this.$get('/videoColumn/findColumnList',{tokenId:this.$store.state.user.tokenId,enabled:''}).then(res => {\n    \t\t// console.log(res.data)\n    \t\tthis.columnIds = res.data\n    \t});\n      // console.log(this.$route.params);\n      this.argu=this.$route.params.argu;\n\t\t},\n\t\tmounted() {\n\t\t\tthis.$get('reprintSth/findAll',{tokenId:this.$store.state.user.tokenId}).then(res => {\n    \t\t// console.log(res.data)\n    \t\tthis.cities = res.data\n      });\n      this.$post('members/findByLevel',{tokenId:this.$store.state.user.tokenId,levelCode:100002}).then(res => {\n        // console.log(res)\n        this.accounts = res.data;\n      });\n\t\t},\n\t\tmethods:{\n      handleClose(done){\n       let myVideo = document.getElementById(\"myVideo\");\n       myVideo.pause();\n        done();\n      },\n      showPre(){\n        this.$refs['form1'].validate((valid) => {\n          // console.log(valid);\n          if(valid){\n            this.showDia=true;\n          }\n        });\n      },\n      getUContent: function(){\n        let content = this.$refs.ueditor.getUEContent();\n        console.log(content);\n        this.form1.content = content;\n      },\n      beforeUpload(file){\n        console.log(file);\n      },\n      uploadVideo(file){\n        let formDatas = new FormData();\n        formDatas.append('newsVideo', file.file);\n        this.uploadVideoing1=true;\n        this.uploadVideoing2=true;\n        // formDatas.append('tokenId',this.$store.state.user.tokenId);\n        this.$post('/news/addVideo',formDatas).then(res =>{\n          if(res.code == 0){\n            this.uploadVideoing1=false;\n            this.showUrl = res.data[1];\n            this.videoId = res.data[0];\n            this.$refs['videoVali'].clearValidate();\n            // console.log(this.showUrl,this.videoId);\n            this.$message({\n              message: res.msg,\n              type: 'success'\n            });\n\n          }else{\n            this.$message({\n              message: res.msg?res.msg:'操作失败',\n              type: 'error'\n            });\n            this.uploadVideoing1=false;\n            this.uploadVideoing2=false;\n          }\n        })\n      },\n      exceedFile(){\n        this.$message.warning('只能上传一个视频!');\n      },\n      uploading(event, file, fileList){\n        console.log(event, file, fileList)\n      },\n      videoChange(file,filelist){\n        console.log(file,filelist);\n        let params = new FormData(); // 创建form对象\n        params.append('file',file,file.name);\n        this.$post('images/upload',params).then(res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t})\n      },\n      submitUpload() {  // 执行的方法是uploadVideo\n        console.log(this.fileListVideo);\n        this.$refs.uploadVideo1.submit();\n      },\n      handleRemove2(file, fileList) {\n        this.showUrl ='';\n        this.videoId='';\n        this.uploadVideoing2=false;\n        this.$message({\n          message: '如果需要,请重新选择视频',\n          type: 'info'\n        });\n      },\n      handleSuccess(res,file){\n        // console.log(res.data[1]);\n        // this.showUrl = res.data[1];\n        // this.videoId = res.data[0];\n        console.log(file);\n      },\n      beforeRemove(file, fileList) {\n        \n        return this.$confirm(`确定移除 ${ file.name }？`);\n      },\n\t\t\tgetFullUrl(){\n\t\t\t\treturn (this.baceUrl+'/news/add')\n      },\n      \n      creatVideo(formName,status){\n        // console.log(this.hasFmt);\n        // console.log(this.$refs.ueditor.getUEContent())\n        this.$refs[formName].validate((valid) => {\n          console.log(valid);\n          if(valid){\n            this.formDatas = new FormData();\n            this.formDatas.append('tokenId',this.$store.state.user.tokenId);\n            this.formDatas.append('title',this.form1.title);  \n            this.formDatas.append('content',this.form1.content);\n            this.formDatas.append('userId',this.form1.userId);\n            // param.append('articleType','1');\n            this.formDatas.append('columnId',this.form1.columnId);\n            this.formDatas.append('tagLabels',this.form1.tagLabels.replace(/，/ig,','));\n            // param.append('keyWords',this.form1.keyWords.replace(/，/ig,','));\n            this.formDatas.append('publishSource','1');\n            this.formDatas.append('status',status);\n            this.formDatas.append('videoId',this.videoId);\n            // this.formDatas.append('videoUrl',this.showUrl);\n            const loading = this.$loading({\n              lock: true,\n              text: '上传中...',\n              target: document.querySelector('.loadingArea'),\n              spinner: 'el-icon-loading',\n              background: 'rgba(0, 0, 0, 0.7)'\n            });\n            this.$post('/video/add',this.formDatas).then(res =>{\n                console.log(res);\n                if(res.code == 0){\n                  loading.close();\n                  this.$message({\n                    message: res.msg,\n                    type: 'success'\n                  });\n                  setTimeout(() => {\n                    this.$router.push({\n                      name: 'video',\n                      params: {\n                        argu: this.argu\n                      }\n                    });\n                    \n                  }, 1000);\n                }else{\n                  this.$message({\n                    message: res.msg?res.msg:'发布失败',\n                    type: 'error'\n                  });\n                }\n              })\n          }\n        })\n      },\n\t\t\n      handleExceed(files, fileList){\n        this.$message.warning(`当前限制上传 ${this.form1.coverNum}个文件`);\n      },\n      handlePictureCardPreview(file) {\n        this.dialogImageUrl = file.url;\n        this.dialogVisible = true;\n      },\n      fanhui(){\n        this.$confirm('返回已编辑内容将重置是否继续？')\n          .then(_ => {\n            // console.log(this.argu)\n            this.$router.push({\n              name: 'news',\n              params: {\n                argu: this.argu\n              }\n            });\n\n            // this.$router.back();\n            done();\n          })\n          .catch(_ => {});\n      }\n    },\n    /* beforeRouteEnter (to, from, next){\n      console.log(from.query)\n      if(from.query.argu){\n         this.argu = from.query.argu;\n        console.log(this.argu)\n      }\n      next();\n    }, */\n    beforeRouteLeave (to, from, next){\n      to.meta.keepAlive = true;\n      next();\n    },\n    \n\t}\n</script>\n<style type=\"text/css\">\n\t.up_form .el-upload-list--picture-card .el-upload-list__item,\n\t.up_form .el-upload--picture-card{\n\t\twidth: 80px;\n\t\theight: 80px;\n\t\tline-height: 88px;\n\t}\n\t.quill-editor .ql-toolbar.ql-snow{\n\t\theight: 60px;\n\t}\n\t.editor .el-form-item__content {\n\t\tline-height: 20px;\n\t}\n\t\n\t.up_form .el-input__inner{\n\t\theight: 30px;\n\t\tline-height: 30px;\n\t\tmax-width: 300px;\n\t}\n\t.up_form .quill-editor .ql-container{\n\t\tmin-height: 550px;\n\t\toverflow-y: auto;\n\t}\n  .source_style .el-form-item__error{\n    left: -50px;\n  }\n  \n  .edui-default{\n    position: relative\n  }\n  \n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/video-add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-body news-add\",staticStyle:{\"min-width\":\"980px\"}},[_c('el-dialog',{attrs:{\"center\":\"\",\"width\":\"375px\",\"visible\":_vm.showDia,\"append-to-body\":\"\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.showDia=$event}}},[_c('el-form',{ref:\"form2\",staticClass:\"form1 u_editor\",attrs:{\"data\":_vm.form2,\"label-width\":\"110px\"}},[_c('video',{staticStyle:{\"background\":\"rgba(0,0,0,0.7)\"},attrs:{\"id\":\"myVideo\",\"width\":\"100%\",\"height\":\"240\",\"controls\":\"\"}},[_c('source',{attrs:{\"src\":_vm.showUrl,\"type\":\"video/mp4\"}})]),_vm._v(\" \"),_c('p',{staticClass:\"marT20\",staticStyle:{\"height\":\"20px\",\"line-height\":\"20px\",\"font-size\":\"16px\"}},[_c('img',{staticStyle:{\"width\":\"20px\",\"height\":\"20px\",\"border-radius\":\"50%\",\"display\":\"block\",\"float\":\"left\",\"margin-right\":\"10px\"},attrs:{\"src\":require(\"@/assets/img/y4.png\"),\"alt\":\"\"}}),_c('span',[_vm._v(_vm._s(_vm.form1.author))])]),_vm._v(\" \"),_c('p',{staticClass:\"title marT20\"},[_vm._v(_vm._s(_vm.form1.title))]),_vm._v(\" \"),_c('p',{staticClass:\"color9\"},[_vm._v(_vm._s(_vm.form1.updateTime))]),_vm._v(\" \"),_c('p',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.form1.content)}})])],1),_vm._v(\" \"),_c('div',{staticClass:\"breadcrumb\",staticStyle:{\"padding\":\"8px\"}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"内容中心\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"发布内容\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"发布视频\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"text-right marR100\"},[_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.fanhui}},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.showPre}},[_vm._v(\"预览\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.creatVideo('form1',0)}}},[_vm._v(\"仅保存\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.creatVideo('form1','1')}}},[_vm._v(\"保存并提交审核\")])],1),_vm._v(\" \"),_c('el-form',{ref:\"form1\",staticClass:\"up_form clearfix\",attrs:{\"model\":_vm.form1,\"label-width\":\"96px\",\"rules\":_vm.rules1}},[_c('div',{staticStyle:{\"width\":\"48%\",\"float\":\"left\",\"padding\":\"15px\",\"margin-left\":\"2%\",\"margin-right\":\"5%\"}},[_c('el-form-item',{attrs:{\"label\":\"视频标题\",\"prop\":\"title\"}},[_c('el-input',{staticStyle:{\"width\":\"420px\"},attrs:{\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"请输入标题\"},model:{value:(_vm.form1.title),callback:function ($$v) {_vm.$set(_vm.form1, \"title\", $$v)},expression:\"form1.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"editor\",attrs:{\"label\":\"视频简介\",\"prop\":\"content\"}},[_c('el-input',{staticStyle:{\"width\":\"420px\"},attrs:{\"type\":\"textarea\",\"rows\":6},model:{value:(_vm.form1.content),callback:function ($$v) {_vm.$set(_vm.form1, \"content\", $$v)},expression:\"form1.content\"}})],1),_vm._v(\" \"),_c('el-form-item',{ref:\"videoVali\",attrs:{\"label\":\"上传视频:\",\"prop\":\"videoVali\"}},[_c('el-upload',{ref:\"uploadVideo1\",staticClass:\"upload-demo\",attrs:{\"limit\":1,\"name\":\"newsVideo\",\"action\":\"\",\"accept\":\"video/mp4\",\"on-remove\":_vm.handleRemove2,\"before-upload\":_vm.beforeUpload,\"http-request\":_vm.uploadVideo,\"on-progress\":_vm.uploading,\"file-list\":_vm.fileListVideo,\"on-success\":_vm.handleSuccess,\"on-exceed\":_vm.exceedFile,\"before-remove\":_vm.beforeRemove,\"auto-upload\":false}},[_c('el-button',{attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"primary\"},slot:\"trigger\"},[_vm._v(\"选取视频\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"success\",\"loading\":_vm.uploadVideoing1,\"disabled\":_vm.uploadVideoing2},on:{\"click\":_vm.submitUpload}},[_vm._v(\"点击上传视频\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"请选择mp4文件进行上传\")])],1)],1),_vm._v(\" \"),(_vm.videoId)?_c('el-form-item',{attrs:{\"label\":\"视频预览:\"}},[_c('video',{staticStyle:{\"background\":\"rgba(0,0,0,0.7)\"},attrs:{\"width\":\"320\",\"height\":\"240\",\"controls\":\"\"}},[_c('source',{attrs:{\"src\":_vm.showUrl,\"type\":\"video/mp4\"}})])]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"35%\",\"float\":\"left\",\"padding\":\"15px\",\"min-width\":\"420px\"}},[_c('el-form-item',{attrs:{\"label\":\"发布到:\",\"prop\":\"columnId\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"name\":\"columnId\",\"placeholder\":\"请选择\"},model:{value:(_vm.form1.columnId),callback:function ($$v) {_vm.$set(_vm.form1, \"columnId\", $$v)},expression:\"form1.columnId\"}},_vm._l((_vm.columnIds),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}))],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"fabuStyle\",attrs:{\"label\":\"发布账号:\",\"prop\":\"userId\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择发布账号\"},model:{value:(_vm.form1.userId),callback:function ($$v) {_vm.$set(_vm.form1, \"userId\", $$v)},expression:\"form1.userId\"}},_vm._l((_vm.accounts),function(item){return _c('el-option',{key:item.userId,attrs:{\"label\":item.nickName,\"value\":item.userId}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tag标签:\",\"prop\":\"tagLabels\"}},[_c('el-input',{attrs:{\"placeholder\":\"用'，'隔开，单个标签小于12字节\"},model:{value:(_vm.form1.tagLabels),callback:function ($$v) {_vm.$set(_vm.form1, \"tagLabels\", $$v)},expression:\"form1.tagLabels\"}})],1)],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4e04269c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/video-add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e04269c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./video-add.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./video-add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./video-add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e04269c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./video-add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/video-add.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}