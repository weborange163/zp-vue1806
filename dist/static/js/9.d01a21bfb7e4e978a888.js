webpackJsonp([9],{"+npy":function(t,e){},gUsY:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("TIfe"),l=(s("mtWM"),{components:{},data:function(){return{currentPage:1,per_page:10,total_pages:1,tableData:[],activeName:"first",columnIds:"",value:"",type:"",accounts:[],imgFullSrc:"",imgSrc:"",uploadData:{},baceUrl:"",status:"",editorOption:{},dialogImageUrl:"",dialogVisible:!1,detailDialog:!1,form1:{title:"",content:"",column:"新闻资讯",sourceType:"1",source:"",status:"",author:"",userId:"1",imgType:"1",newsFile:"",tagLabels:"",keyWords:"",coverImgId:""},idDetail:"",cities:[],rules1:{}}},created:function(){var t=this;this.baceUrl=Object(a.a)(),this.getParams(),this.showNews(),this.$get("/column/findColumnList",{tokenId:this.$store.state.user.tokenId,navigationBar:""}).then(function(e){t.columnIds=e.data})},mounted:function(){var t=this;this.$get("/reprintSth/findAll",{tokenId:this.$store.state.user.tokenId}).then(function(e){t.cities=e.data,2==t.form1.sourceType&&t.cities.map(function(e){e.id==t.form1.source&&(t.form1.sourceName=e.name)})}),this.getComment(),this.$post("members/findByLevel",{tokenId:this.$store.state.user.tokenId,levelCode:100002}).then(function(e){console.log(e),t.accounts=e.data}),document.getElementById("content").innerHTML=this.form1.content},methods:{handleSizeChange:function(t){this.per_page=t,this.getComment()},handleCurrentChange:function(t){this.currentPage=t,this.getComment()},tabClick:function(t,e){console.log(t,e)},onOff:function(t,e,s){var a=this;this.$confirm("确定要"+e+"该新闻吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={tokenId:a.$store.state.user.tokenId,status:t,id:a.form1.id};a.$post("news/isOnline",e).then(function(t){a.showNews(),a.$message({type:"success",message:t.msg})})}).catch(function(){a.$message({type:"info",message:"失败了"})})},getComment:function(){var t=this,e={tokenId:this.$store.state.user.tokenId,linkId:this.idDetail,limit:this.per_page,offset:this.currentPage};this.$post("/comment/importList",e).then(function(e){0==e.code&&(t.tableData=e.data[0].rows,t.total_pages=e.data[0].total)})},toAudit:function(){var t=this;this.$confirm("确认要提交审核吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){var e={tokenId:t.$store.state.user.tokenId,ids:t.form1.id};console.log(e),t.$post("news/batchWaitCheck",e).then(function(e){t.$message({type:"success",message:e.msg}),t.showNews()})}).catch(function(){t.$message({type:"info",message:res.msg})})},showNews:function(){var t=this,e={tokenId:this.$store.state.user.tokenId,id:this.idDetail};this.$get("news/show",e).then(function(e){t.form1=e.data[0]})},getParams:function(){var t=this.$route.params.id;this.idDetail=t},getFullUrl:function(){return this.baceUrl+"/news/add"}},beforeRouteLeave:function(t,e,s){t.meta.keepAlive=!0,s()},watch:{$route:"getParams"}}),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-body news_lookes",staticStyle:{"min-width":"1200px"}},[a("el-dialog",{attrs:{center:"",width:"375px",visible:t.detailDialog},on:{"update:visible":function(e){t.detailDialog=e}}},[a("el-form",{ref:"form1",staticClass:"form1 u_editor",attrs:{data:t.form1,"label-width":"110px"}},[2==t.form1.sourceType?a("div",{staticClass:"zhuan"},[a("p",{staticClass:"title"},[t._v(t._s(t.form1.title))]),t._v(" "),a("div",{staticClass:"pubMsg"},[a("div",{staticClass:"reprint"},[t._v("转载")]),t._v(" "),a("p",{domProps:{innerHTML:t._s(t.form1.author)}}),t._v(" "),a("p",[t._v("转自："),a("span",{domProps:{innerHTML:t._s(t.form1.sourceName)}})]),t._v(" "),a("p",{domProps:{innerHTML:t._s(t.form1.updateTime)}})])]):a("div",{staticClass:"yuan"},[a("div",{staticClass:"pubMsg"},[a("img",{attrs:{id:"img1",src:s("wn7+")}}),t._v(" "),a("p",{staticClass:"title"},[t._v(t._s(t.form1.title))]),t._v(" "),a("p",{domProps:{innerHTML:t._s(t.form1.author)}}),t._v(" "),a("p",{domProps:{innerHTML:t._s(t.form1.updateTime)}})])]),t._v(" "),a("article",{staticClass:"content",domProps:{innerHTML:t._s(t.form1.content)}})])],1),t._v(" "),a("div",{staticClass:"breadcrumb",staticStyle:{padding:"8px"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("内容中心")]),t._v(" "),a("el-breadcrumb-item",[t._v("新闻管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("查看新闻资讯")])],1)],1),t._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"text-right marR100"},[a("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(e){t.$router.back()}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(e){t.detailDialog=!0}}},[t._v("预览")]),t._v(" "),"0"==t.form1.status?a("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(e){t.toAudit()}}},[t._v("提交审核")]):t._e(),t._v(" "),"5"==t.form1.status?a("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(e){t.onOff("4","上线",t.form1.articleType)}}},[t._v("上线")]):t._e(),t._v(" "),"4"==t.form1.status&&"1"!=t.form1.topFlag&&"1"!=t.form1.recommend&&1!=t.form1.specialNewsStatus?a("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(e){t.onOff("5","下线",t.form1.articleType)}}},[t._v("下线")]):t._e()],1),t._v(" "),a("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[a("el-form",{ref:"form1",staticClass:"up_form clearfix",attrs:{model:t.form1,"label-width":"96px",rules:t.rules1}},[a("div",{staticStyle:{width:"48%",float:"left",padding:"15px","margin-left":"2%","margin-right":"5%"}},[a("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[a("el-input",{attrs:{type:"textarea",autosize:"",disabled:!0},model:{value:t.form1.title,callback:function(e){t.$set(t.form1,"title",e)},expression:"form1.title"}})],1),t._v(" "),a("el-form-item",{staticClass:"editor ql-show",attrs:{label:"文章内容",prop:"content"}},[a("div",{staticClass:"ql-editor",attrs:{id:"content"},domProps:{innerHTML:t._s(t.form1.content)}})])],1),t._v(" "),a("div",{staticStyle:{width:"35%",float:"left",padding:"15px"}},[a("el-form-item",{attrs:{label:"发布到:",prop:"columnId"}},[a("el-select",{staticStyle:{"padding-left":"6px"},attrs:{placeholder:"暂无栏目",disabled:""},model:{value:t.form1.columnId,callback:function(e){t.$set(t.form1,"columnId",e)},expression:"form1.columnId"}},t._l(t.columnIds,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"来源:",prop:"sourceType"}},[a("el-radio-group",{model:{value:t.form1.sourceType,callback:function(e){t.$set(t.form1,"sourceType",e)},expression:"form1.sourceType"}},[a("el-radio",{attrs:{label:"1",disabled:""}},[t._v("原创")]),t._v(" "),a("el-radio",{attrs:{label:"2",disabled:""}},[t._v("转载")])],1),t._v(" "),2==t.form1.sourceType?a("el-select",{staticStyle:{"margin-left":"20px",width:"140px"},attrs:{disabled:"",placeholder:"请选择来源"},model:{value:t.form1.source,callback:function(e){t.$set(t.form1,"source",e)},expression:"form1.source"}},t._l(t.cities,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"作者:"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form1.author,callback:function(e){t.$set(t.form1,"author",e)},expression:"form1.author"}})],1),t._v(" "),"3"!=t.form1.publishSource?a("el-form-item",{attrs:{label:"发布账号:",prop:"userId"}},[a("el-select",{attrs:{disabled:""},model:{value:t.form1.userId,callback:function(e){t.$set(t.form1,"userId",e)},expression:"form1.userId"}},t._l(t.accounts,function(t){return a("el-option",{key:t.userId,attrs:{label:t.nickName,value:t.userId}})}))],1):a("el-form-item",{attrs:{label:"发布账号:",required:""}},[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.form1.createUser,callback:function(e){t.$set(t.form1,"createUser",e)},expression:"form1.createUser"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面图样式:",prop:"coverNum"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:t.form1.coverNum,callback:function(e){t.$set(t.form1,"coverNum",e)},expression:"form1.coverNum"}},[a("el-radio",{attrs:{label:0}},[t._v("无图")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("单图")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("三图")])],1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"!=t.form1.coverNum,expression:"form1.coverNum != '0'"}],attrs:{label:"封面图类型:"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:t.form1.imgType,callback:function(e){t.$set(t.form1,"imgType",e)},expression:"form1.imgType"}},[a("el-radio",{attrs:{label:"1"}},[t._v("上传封面图")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("提取正文图为封面图")])],1),t._v(" "),t._l(t.form1.newsImgList,function(t){return a("li",{staticClass:"showImgs el-upload-list"},[a("img",{attrs:{src:t.coverImgUrl}})])})],2),t._v(" "),t.form1.videoId?a("el-form-item",{attrs:{label:"视频预览:"}},[a("video",{staticStyle:{background:"rgba(0,0,0,0.7)"},attrs:{src:t.form1.videoUrl,width:"320",height:"240",controls:""}},[a("source",{attrs:{src:t.form1.videoUrl,type:"video/mp4"}})])]):t._e(),t._v(" "),t.form1.videoId?a("el-form-item",{attrs:{label:"视频名称:"}},[a("p",{domProps:{textContent:t._s(t.form1.videoName)}})]):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"Tag标签:"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form1.tagLabels,callback:function(e){t.$set(t.form1,"tagLabels",e)},expression:"form1.tagLabels"}})],1),t._v(" "),1==t.form1.topFlag?a("el-form-item",{attrs:{label:"推荐到:"}},[a("el-input",{attrs:{value:"新闻主页置顶",disabled:!0}})],1):t._e(),t._v(" "),1==t.form1.recommend?a("el-form-item",{attrs:{label:"推荐到:"}},[a("el-input",{attrs:{value:"新闻主页banner",disabled:!0}})],1):t._e(),t._v(" "),1==t.form1.columnTopFlag?a("el-form-item",{attrs:{label:"推荐到:"}},[a("el-input",{attrs:{value:"栏目置顶",disabled:!0}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"文章ID:"}},[a("el-input",{attrs:{disabled:""},model:{value:t.form1.articleId,callback:function(e){t.$set(t.form1,"articleId",e)},expression:"form1.articleId"}})],1)],1)])],1),t._v(" "),a("el-tab-pane",{attrs:{label:"系统信息",name:"second"}},[a("div",{staticClass:"tableOverstyle"},[a("table",{staticClass:"el-table el-table__body el-table--border",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("colgroup",[a("col",{attrs:{name:"el-table_1_column_1",width:"20%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_1",width:"30%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_1",width:"20%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_1",width:"30%"}})]),t._v(" "),a("tbody",[a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("发布来源")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},["1"==t.form1.publishSource?a("span",[t._v("PC后台")]):t._e(),t._v(" "),"2"==t.form1.publishSource?a("span",[t._v("数据爬取")]):t._e(),t._v(" "),"3"==t.form1.publishSource?a("span",[t._v("APP端")]):t._e()])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("状态")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},["0"==t.form1.status?a("span",[t._v("新建")]):t._e(),t._v(" "),"1"==t.form1.status?a("span",[t._v("待审核")]):t._e(),t._v(" "),"2"==t.form1.status?a("span",[t._v("审核中")]):t._e(),t._v(" "),"3"==t.form1.status?a("span",[t._v("审核不通过")]):t._e(),t._v(" "),"4"==t.form1.status?a("span",[t._v("已上线")]):t._e(),t._v(" "),"5"==t.form1.status?a("span",[t._v("已下线")]):t._e()])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("系统评论量")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.commentsImport))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("用户评论量")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.comments))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("系统收藏量")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.likesImport))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("用户收藏量")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.likes))])])])])]),t._v(" "),a("table",{staticClass:"el-table el-table__body el-table--border marT20",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("colgroup",[a("col",{attrs:{name:"el-table_1_column_1"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_1"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_1"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_1"}})]),t._v(" "),a("tbody",[a("tr",{staticClass:"el-table__row",staticStyle:{background:"#fafafa","font-weight":"600"}},[a("td",[a("div",{staticClass:"cell"},[t._v("时间类型")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("时间")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("操作账号")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("备注")])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("创建时间")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.createTime))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.createUser))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"})])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("上线时间")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.onlineTime))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.onlineUser))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"})])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("下线时间")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.offlineTime))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.offlineUser))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"})])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("修改时间")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.updateTime))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.updateUser))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"})])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("审核时间")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.form1.checkTime))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s("涉及敏感词"==t.form1.checkReason?"机审":t.form1.checkPerson))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},["3"==t.form1.status?a("p",[t._v(t._s("其它"==t.form1.checkReason?t.form1.checkMessage:t.form1.checkReason))]):t._e()])])])])]),t._v(" "),a("el-table",{staticClass:"marT20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"评论内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nick_name",label:"账号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"评论时间"}})],1),t._v(" "),a("el-pagination",{staticClass:"text-right marT20",attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":this.per_page,layout:"total, sizes, prev, pager, next, jumper",total:this.total_pages},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])],1)],1)],1)},staticRenderFns:[]};var i=s("VU/8")(l,o,!1,function(t){s("+npy")},null,null);e.default=i.exports}});
//# sourceMappingURL=9.d01a21bfb7e4e978a888.js.map