webpackJsonp([35],{gsBi:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o,i=l("bOdI"),r=l.n(i),s=l("TIfe"),n=(o={data:function(){return{quill:{width:420,border:!0,height:150,zIndex:1e4,content:"wellcome ~",syncOutput:!0,theme:"snow",disabled:!1,full:!1,toolbar:[[{header:1},{header:2}],["bold","italic","underline","strike","link"]]},baceUrl:"",editorOption:{},dialogImageUrl:"",dialogVisible:!1,classifyType:"",form2:{},uploadData:{},value:""}},created:function(){this.baceUrl=Object(s.a)()},mounted:function(){var t=this;this.$get("/industry/get",{tokenId:this.$store.state.user.tokenId,id:this.$route.params.rowInfo.id}).then(function(e){console.log(e.data[0].industry),t.form2=e.data[0].industry})}},r()(o,"created",function(){this.baceUrl=Object(s.a)()}),r()(o,"methods",(a={uploadImg:function(t,e){var l=this,a=new FormData;a.append("file",t,t.name),this.$post("images/upload",a).then(function(t){var a=l.baceUrl+t.data[0].showUrl;e(a,"center")})},onEditorBlur:function(t){t.quill,t.html,t.text},getFullUrl:function(){return console.log(this.baceUrl+"/industry/save"),this.baceUrl+"/industry/save"},fileOver:function(){this.$message("只允许添加一张图片,如果替换请删除后再上传")},toAudit:function(t,e){var l=this;return this.$refs[t].validate(function(t){if(t){var a={id:"459733959777976321",tokenId:l.$store.state.user.tokenId,status:e,title:l.form2.title,content:l.form2.content,userId:l.form2.userId,imgType:l.form2.imgType,tagLabel:l.form2.tagLabel,publishSource:"1",classifyType:l.value};return l.uploadData=a,setTimeout(function(){l.$refs.upload.submit(),l.$message({type:"success",message:"添加成功!"}),setTimeout(function(){l.$router.push({name:"market"})},1e3)},0),!0}return console.log("error submit!!"),!1}),!0}},r()(a,"onEditorBlur",function(t){console.log("editor blur!",t),console.log(this.form2.content)}),r()(a,"onEditorFocus",function(t){console.log("editor focus!",t)}),r()(a,"onEditorReady",function(t){console.log("editor ready!",t)}),r()(a,"onEditorChange",function(t){var e=t.val;console.log("editor change!",e)}),r()(a,"handleRemove",function(t,e){alert("删除"),console.log(t,e)}),r()(a,"handlePictureCardPreview",function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0,console.log(this.dialogImageUrl),alert("放大")}),r()(a,"watch",{$route:"getParams"}),a)),o),u={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"page-body"},[l("div",{staticClass:"breadcrumb",staticStyle:{padding:"8px"}},[l("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("内容中心")]),t._v(" "),l("el-breadcrumb-item",[t._v("行业信息")]),t._v(" "),l("el-breadcrumb-item",[t._v("添加行情")])],1)],1),t._v(" "),l("div",{staticClass:"box"},[l("div",{staticClass:"text-right"},[l("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(e){t.$router.back()}}},[t._v("返回")]),t._v(" "),l("el-button",{staticClass:"light_btn",attrs:{size:"small"}},[t._v("预览")]),t._v(" "),l("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(e){t.toAudit("form2",1)}}},[t._v("仅保存")]),t._v(" "),l("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(e){t.toAudit("form2",2)}}},[t._v("保存并提交审核")])],1),t._v(" "),l("el-form",{ref:"form2",staticClass:"up_form",attrs:{model:t.form2,"label-width":"80px"}},[l("div",{staticStyle:{width:"40%",float:"left",padding:"15px","margin-left":"5%","margin-right":"10%"}},[l("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[l("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form2.title,callback:function(e){t.$set(t.form2,"title",e)},expression:"form2.title"}})],1),t._v(" "),l("el-form-item",{staticClass:"editor",attrs:{label:"文章内容",prop:"content"}},[l("m-quill-editor",{ref:"myQuillEditor",attrs:{width:t.quill.width,getContent:t.onEditorChange,"has-border":t.quill.border,zIndex:t.quill.zIndex,"sync-output":t.quill.syncOutput,theme:t.quill.theme,disabled:t.quill.disabled,fullscreen:t.quill.full},on:{upload:t.uploadImg,blur:function(e){t.onEditorBlur(e)}},model:{value:t.form2.content,callback:function(e){t.$set(t.form2,"content",e)},expression:"form2.content"}})],1)],1),t._v(" "),l("div",{staticStyle:{width:"35%",float:"left",padding:"15px"}},[l("el-form-item",{attrs:{label:"发布到:"}},[l("el-input",{staticStyle:{width:"173px"},attrs:{disabled:!0},model:{value:t.form2.classifyTypes,callback:function(e){t.$set(t.form2,"classifyTypes",e)},expression:"form2.classifyTypes"}})],1),t._v(" "),l("el-select",{attrs:{name:"classifyType",placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.classifyType,function(t){return l("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),l("el-form-item",{attrs:{label:"发布账号:",prop:"userId","label-width":"82"}},[l("el-select",{attrs:{placeholder:"请选择发布账号"},model:{value:t.form2.userId,callback:function(e){t.$set(t.form2,"userId",e)},expression:"form2.userId"}},[l("el-option",{attrs:{label:"小号1",value:"1"}}),t._v(" "),l("el-option",{attrs:{label:"小号2",value:"2"}})],1)],1),t._v(" "),l("el-form-item",{attrs:{label:"附加选项:",prop:"imgType","label-width":"82"}},[l("el-radio-group",{model:{value:t.form2.imgType,callback:function(e){t.$set(t.form2,"imgType",e)},expression:"form2.imgType"}},[l("el-radio",{attrs:{label:"1"}},[t._v("上传缩略图")]),t._v(" "),l("el-radio",{attrs:{label:"2"}},[t._v("提取第一个图为缩略图")])],1)],1),t._v(" "),l("el-form-item",[l("el-upload",{ref:"upload",attrs:{action:t.getFullUrl(),name:"newsFile",data:t.uploadData,multiple:!1,limit:1,"list-type":"picture-card","auto-upload":!1,"on-preview":t.handlePictureCardPreview,"on-exceed":t.fileOver,"on-remove":t.handleRemove}},[l("i",{staticClass:"el-icon-plus"})]),t._v(" "),l("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[l("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),l("el-form-item",{attrs:{label:"Tag标签:"}},[l("el-input",{attrs:{placeholder:"用逗号隔开，单个标签少于12字节"},model:{value:t.form2.tagLabel,callback:function(e){t.$set(t.form2,"tagLabel",e)},expression:"form2.tagLabel"}})],1)],1)])],1)])},staticRenderFns:[]};var c=l("VU/8")(n,u,!1,function(t){l("mGH9")},null,null);e.default=c.exports},mGH9:function(t,e){}});
//# sourceMappingURL=35.3d34111560220fe23a23.js.map