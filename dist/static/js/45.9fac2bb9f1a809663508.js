webpackJsonp([45],{YFA3:function(e,t){},gsBi:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=l("bOdI"),o=l.n(i),r=l("TIfe"),s={data:function(){return{dialogVisible:!1,bannerDialog:!1,quill:{width:420,border:!0,height:150,content:"wellcome ~",syncOutput:!0,theme:"snow",disabled:!1,full:!1,toolbar:[[{header:1},{header:2}],["bold","italic","underline","strike","link"]]},baceUrl:"",fileList:[],editorOption:{},dialogImageUrl:"",classifyTypes:"行情",classifyType:"",form2:{title:"",content:"",column:"新闻资讯",sourceType:"1",source:"",status:"",author:"",userId:"1",imgType:"1",newsFile:"",tagLabels:"",keyWords:"",coverImgId:""},uploadData:{},value:""}},created:function(){this.baceUrl=Object(r.a)()},mounted:function(){var e=this;this.$get("/industry/get",{tokenId:this.$store.state.user.tokenId,id:this.$route.params.id}).then(function(t){console.log(t.data[0].industry),e.form2=t.data[0].industry,e.imgSrc=e.form2.showUrl,e.status=e.form2.status,e.classifyType=e.form2.classifyType,e.imgFullSrc=e.baceUrl+e.imgSrc,e.fileList.push({url:e.imgFullSrc});var l=e.classifyType;e.$get("/industryCategory/findIndustryCategoryList",{tokenId:e.$store.state.user.tokenId}).then(function(t){console.log(t.data),e.classifyType=t.data;for(var a=0;a<e.classifyType.length;a++)l==e.classifyType[a].id&&(e.value=e.classifyType[a].name)})})},methods:(a={uploadImg:function(e,t){var l=this,a=new FormData;a.append("file",e,e.name),this.$post("images/upload",a).then(function(e){var a=l.baceUrl+e.data[0].showUrl;t(a,"center")})},onEditorBlur:function(e){e.quill,e.html,e.text},getFullUrl:function(){return console.log(this.baceUrl+"/industry/save"),this.baceUrl+"/industry/save"},fileOver:function(){this.$message("只允许添加一张图片,如果替换请删除后再上传")},toAudit:function(e,t){var l=this;return this.$refs[e].validate(function(e){if(e){var t={id:l.$route.params.id,tokenId:l.$store.state.user.tokenId,status:l.status,title:l.form2.title,content:l.form2.content,classifyType:l.value,userId:l.form2.userId,imgType:l.form2.imgType,tagLabel:l.form2.tagLabel,publishSource:"1"};return l.uploadData=t,setTimeout(function(){l.$refs.upload.submit(),l.$message({type:"success",message:"添加成功!"}),setTimeout(function(){l.$router.push({name:"market"})},1e3)},0),!0}return console.log("error submit!!"),!1}),!0}},o()(a,"onEditorBlur",function(e){console.log("editor blur!",e),console.log(this.form2.content)}),o()(a,"onEditorFocus",function(e){console.log("editor focus!",e)}),o()(a,"onEditorReady",function(e){console.log("editor ready!",e)}),o()(a,"onEditorChange",function(e){var t=e.val;console.log("editor change!",t)}),o()(a,"handleRemove",function(e,t){alert("删除"),console.log(e,t)}),o()(a,"handlePictureCardPreview",function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0,console.log(this.dialogImageUrl),alert("放大")}),o()(a,"watch",{$route:"getParams"}),a)},n={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"page-body"},[l("el-dialog",{attrs:{center:"",width:"22%",visible:e.bannerDialog,"append-to-body":""},on:{"update:visible":function(t){e.bannerDialog=t}}},[l("el-form",{ref:"form2",staticClass:"form2",attrs:{data:e.form2,"label-width":"110px"}},[l("p",{attrs:{id:"p1"}},[e._v(e._s(e.form2.title))]),e._v(" "),l("p",{attrs:{id:"p2"}},[e._v(e._s(e.form2.content))])])],1),e._v(" "),l("div",{staticClass:"breadcrumb",staticStyle:{padding:"8px"}},[l("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("内容中心")]),e._v(" "),l("el-breadcrumb-item",[e._v("行业信息")]),e._v(" "),l("el-breadcrumb-item",[e._v("添加行情")])],1)],1),e._v(" "),l("div",{staticClass:"box"},[l("div",{staticClass:"text-right"},[l("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(t){e.$router.back()}}},[e._v("返回")]),e._v(" "),l("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(t){e.bannerDialog=!0}}},[e._v("预览")]),e._v(" "),l("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(t){e.toAudit("form2")}}},[e._v("保存")])],1),e._v(" "),l("el-form",{ref:"form2",staticClass:"up_form",attrs:{model:e.form2,"label-width":"80px"}},[l("div",{staticStyle:{width:"40%",float:"left",padding:"15px","margin-left":"5%","margin-right":"10%"}},[l("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[l("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form2.title,callback:function(t){e.$set(e.form2,"title",t)},expression:"form2.title"}})],1),e._v(" "),l("el-form-item",{staticClass:"editor",attrs:{label:"文章内容",prop:"content"}},[l("m-quill-editor",{ref:"myQuillEditor",attrs:{width:e.quill.width,getContent:e.onEditorChange,"has-border":e.quill.border,zIndex:e.quill.zIndex,"sync-output":e.quill.syncOutput,theme:e.quill.theme,disabled:e.quill.disabled,fullscreen:e.quill.full},on:{upload:e.uploadImg,blur:function(t){e.onEditorBlur(t)}},model:{value:e.form2.content,callback:function(t){e.$set(e.form2,"content",t)},expression:"form2.content"}})],1)],1),e._v(" "),l("div",{staticStyle:{width:"35%",float:"left",padding:"15px"}},[l("el-form-item",{attrs:{label:"发布到:"}},[l("el-input",{staticStyle:{width:"173px"},attrs:{disabled:!0},model:{value:e.classifyTypes,callback:function(t){e.classifyTypes=t},expression:"classifyTypes"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"所属分类",prop:"userId","label-width":"82"}},[l("el-select",{staticStyle:{"padding-left":"6px"},attrs:{name:"classifyType",placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.classifyType,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"发布账号:",prop:"userId","label-width":"82"}},[l("el-select",{attrs:{placeholder:"请选择发布账号"},model:{value:e.form2.userId,callback:function(t){e.$set(e.form2,"userId",t)},expression:"form2.userId"}},[l("el-option",{attrs:{label:"小号1",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"小号2",value:"2"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"附加选项:",prop:"imgType","label-width":"82"}},[l("el-radio-group",{model:{value:e.form2.imgType,callback:function(t){e.$set(e.form2,"imgType",t)},expression:"form2.imgType"}},[l("el-radio",{attrs:{label:"1"}},[e._v("上传缩略图")]),e._v(" "),l("el-radio",{attrs:{label:"2"}},[e._v("提取第一个图为缩略图")])],1)],1),e._v(" "),l("el-form-item",[l("el-upload",{ref:"upload",attrs:{action:e.getFullUrl(),name:"newsFile",data:e.uploadData,multiple:!1,limit:1,"list-type":"picture-card","auto-upload":!1,"file-list":e.fileList,"on-preview":e.handlePictureCardPreview,"on-exceed":e.fileOver,"on-remove":e.handleRemove}},[l("i",{staticClass:"el-icon-plus"})]),e._v(" "),l("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),l("el-form-item",{attrs:{label:"Tag标签:"}},[l("el-input",{attrs:{placeholder:"用逗号隔开，单个标签少于12字节"},model:{value:e.form2.tagLabel,callback:function(t){e.$set(e.form2,"tagLabel",t)},expression:"form2.tagLabel"}})],1)],1)])],1)],1)},staticRenderFns:[]};var u=l("VU/8")(s,n,!1,function(e){l("YFA3")},null,null);t.default=u.exports}});
//# sourceMappingURL=45.9fac2bb9f1a809663508.js.map