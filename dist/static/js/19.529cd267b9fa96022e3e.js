webpackJsonp([19],{JYcY:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=l("TIfe"),a=(l("mtWM"),{components:{},data:function(){return{value:"",pkg:"",qita:!0,quill:{width:420,border:!0,height:150,content:"wellcome ~",syncOutput:!0,theme:"snow",disabled:!1,full:!1,toolbar:[[{header:1},{header:2}],["bold","italic","underline","strike","link"]]},uploadData:{},baceUrl:"",column:"新闻资讯",editorOption:{},dialogImageUrl:"",dialogVisible:!1,form1:{title:"",content:"",column:"新闻资讯",sourceType:"1",source:"",author:"",userId:"1",imgType:"1",newsFile:"",tagLabels:"",keyWords:""},rules:{region:[{required:!0}]},cities:[],idDetail:"",imgSrc:"",fileList:[],classifyType:"",dialogTableVisible:!1,dialogFormVisible:!1,accounts:"",form:{name:"",region:"您发布的内容排版、错字过于混乱"},formLabelWidth:"120px",rules1:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"change"}],sourceType:[{required:!0,message:"请选择来源",trigger:"change"}],userId:[{required:!0,message:"请选择发布账号",trigger:"change"}],imgType:[{required:!0,message:"请选择图片",trigger:"change"}],source:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}],argu:{}}}},created:function(){this.baceUrl=Object(s.a)(),this.getParams(),this.showNews(),this.argu=this.$route.params.argu},mounted:function(){var e=this;this.$get("reprintSth/findAll",{tokenId:this.$store.state.user.tokenId}).then(function(t){e.cities=t.data}),this.$post("members/findByLevel",{tokenId:this.$store.state.user.tokenId,levelCode:100002}).then(function(t){e.accounts=t.data}),document.getElementById("content").innerHTML=this.form1.content},methods:{showNews:function(){var e=this,t={tokenId:this.$store.state.user.tokenId,id:this.idDetail};this.$get("news/show",t).then(function(t){e.form1=t.data[0],e.classifyType=e.form1.classifyType,"1"==e.form1.articleType?e.column="新闻":e.column="行情",e.imgSrc=e.form1.coverImgUrl,e.status=e.form1.status;var l=e.classifyType;e.$get("/industryCategory/findIndustryCategoryList",{tokenId:e.$store.state.user.tokenId}).then(function(t){console.log(t.data),e.classifyType=t.data;for(var s=0;s<e.classifyType.length;s++)l==e.classifyType[s].id&&(e.value=e.classifyType[s].name)})})},selectChange:function(e){console.log(e),"其它"==e?this.qita=!1:(this.qita=!0,this.form.name="")},getParams:function(){var e=this.$route.params.id;this.idDetail=e},uploadImg:function(e,t){var l=this;console.log(e);var s=new FormData;s.append("file",e,e.name),console.log(e.name),this.$post("images/upload",s).then(function(e){var s=l.baceUrl+e.data[0].showUrl;t(s,"center"),console.log(e)})},getFullUrl:function(){return this.baceUrl+"/news/add"},toAudit:function(e){var t=this;this.$confirm("是否要进行审核操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var l={ids:t.$route.params.id,tokenId:t.$store.state.user.tokenId,status:e};3==e&&(l.checkReason=t.form.region,l.checkMessage=t.form.name),t.$post("/news/check",l).then(function(e){if(0==e.code){var l="";l="新闻"==t.column?"audit-news":"audit-market",t.$message({type:"success",message:e.msg}),setTimeout(function(){t.$router.push({name:l,params:{argu:t.argu}})},1e3)}else 2==e.code&&t.$message({type:"info",message:e.msg})})}).catch(function(){t.$message({type:"info",message:"已取消审核操作"})})},test:function(){console.log(this.form1.source)},onEditorBlur:function(e){e.quill,e.html,e.text;console.log(this.form1.content)},onEditorFocus:function(e){console.log("editor focus!",e)},onEditorReady:function(e){console.log("editor ready!",e)},onEditorChange:function(e){console.log("editor change!",e)},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},fanhui:function(){var e="";e="新闻"==this.column?"audit-news":"audit-market",this.$router.push({name:e,params:{argu:this.argu}})}},beforeRouteLeave:function(e,t,l){e.meta.keepAlive=!1,l()},watch:{$route:"getParams"}}),i={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"page-body",staticStyle:{"min-width":"980px"}},[l("div",{staticClass:"breadcrumb",staticStyle:{padding:"8px"}},[l("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("内容中心")]),e._v(" "),l("el-breadcrumb-item",[e._v("新闻审核")]),e._v(" "),l("el-breadcrumb-item",[e._v("审核"+e._s(e.column)+"资讯")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"审核页面",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[l("el-form-item",{attrs:{label:"审核原因",prop:"region"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择不通过的原因"},on:{change:e.selectChange},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[l("el-option",{attrs:{label:"您发布的内容排版、错字过于混乱",value:"您发布的内容排版、错字过于混乱"}}),e._v(" "),l("el-option",{attrs:{label:"您发布的内容涉嫌敏感内容",value:"您发布的内容涉嫌敏感内容"}}),e._v(" "),l("el-option",{attrs:{label:"您发布的内容无具体信息，或信息无意义",value:"您发布的内容无具体信息，或信息无意义"}}),e._v(" "),l("el-option",{attrs:{label:"您发布的内容不符合栏目属性",value:"您发布的内容不符合栏目属性"}}),e._v(" "),l("el-option",{attrs:{label:"其它",value:"其它"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"审核信息"}},[l("el-input",{attrs:{size:"mini",type:"textarea","auto-complete":"off",disabled:e.qita,placeholder:"审核原因选择其它,可以填写审核信息"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.toAudit("3")}}},[e._v("确 定")])],1)],1),e._v(" "),l("div",{staticClass:"box"},[l("div",{staticClass:"text-right"},[l("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:e.fanhui}},[e._v("返回")]),e._v(" "),l("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("不通过")]),e._v(" "),l("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(t){e.toAudit("4")}}},[e._v("通过")])],1),e._v(" "),l("el-form",{ref:"form1",staticClass:"up_form clearfix",attrs:{model:e.form1,"label-width":"84px",rules:e.rules1}},[l("div",{staticStyle:{width:"48%",float:"left",padding:"15px","margin-left":"2%","margin-right":"5%"}},[l("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[l("el-input",{attrs:{disabled:!0,type:"textarea",autosize:"",placeholder:"请输入标题"},model:{value:e.form1.title,callback:function(t){e.$set(e.form1,"title",t)},expression:"form1.title"}})],1),e._v(" "),l("el-form-item",{staticClass:"editor",attrs:{label:"文章内容",prop:"content"}},[l("div",{staticClass:"ql-editor",attrs:{id:"content"},domProps:{innerHTML:e._s(e.form1.content)}})])],1),e._v(" "),l("div",{staticStyle:{width:"35%",float:"left",padding:"15px"}},[l("el-form-item",{attrs:{label:"发布到:"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.column,callback:function(t){e.column=t},expression:"column"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"来源:",prop:"sourceType"}},[l("el-radio-group",{attrs:{disabled:!0},on:{change:function(t){e.test()}},model:{value:e.form1.sourceType,callback:function(t){e.$set(e.form1,"sourceType",t)},expression:"form1.sourceType"}},[l("el-radio",{attrs:{label:"1"}},[e._v("原创")]),e._v(" "),l("el-radio",{attrs:{label:"2"}},[e._v("转载")])],1),e._v(" "),2==e.form1.sourceType?l("el-select",{staticStyle:{"margin-left":"20px",width:"140px"},attrs:{disabled:!0,placeholder:"请选择来源"},model:{value:e.form1.source,callback:function(t){e.$set(e.form1,"source",t)},expression:"form1.source"}},e._l(e.cities,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})):e._e()],1),e._v(" "),l("el-form-item",{attrs:{label:"作者:"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.form1.author,callback:function(t){e.$set(e.form1,"author",t)},expression:"form1.author"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"所属分类:",prop:"userId",required:""}},[l("el-select",{staticStyle:{"padding-left":"6px"},attrs:{name:"classifyType",placeholder:"暂无分类",disabled:!0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.classifyType,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),"3"!=e.form1.publishSource?l("el-form-item",{attrs:{label:"发布账号:",prop:"userId","label-width":"82"}},[l("el-select",{attrs:{disabled:!0,placeholder:"请选择发布账号"},model:{value:e.form1.userId,callback:function(t){e.$set(e.form1,"userId",t)},expression:"form1.userId"}},e._l(e.accounts,function(e){return l("el-option",{key:e.userId,attrs:{label:e.nickName,value:e.userId}})}))],1):l("el-form-item",{attrs:{label:"发布账号:",required:""}},[l("el-input",{attrs:{size:"mini",disabled:""},model:{value:e.form1.createUser,callback:function(t){e.$set(e.form1,"createUser",t)},expression:"form1.createUser"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"附加选项:",prop:"imgType","label-width":"82"}},[l("el-radio-group",{attrs:{disabled:!0},model:{value:e.form1.imgType,callback:function(t){e.$set(e.form1,"imgType",t)},expression:"form1.imgType"}},[l("el-radio",{attrs:{label:"1"}},[e._v("上传缩略图")]),e._v(" "),l("el-radio",{attrs:{label:"2"}},[e._v("提取第一个图为缩略图")])],1)],1),e._v(" "),1==e.form1.imgType?l("el-form-item",{attrs:{label:"封面图",required:""}},[l("img",{staticClass:"wh80",attrs:{src:e.imgSrc,alt:"封面图展示"}})]):e._e(),e._v(" "),e.form1.videoId?l("el-form-item",{attrs:{label:"视频地址:"}},[l("a",{attrs:{target:"_blank",href:e.form1.videoUrl}},[e._v(e._s(e.form1.videoUrl))])]):e._e(),e._v(" "),e.form1.videoId?l("el-form-item",{attrs:{label:"视频名称:"}},[l("p",{domProps:{textContent:e._s(e.form1.videoName)}})]):e._e(),e._v(" "),l("el-form-item",{attrs:{label:"Tag标签:"}},[l("el-input",{attrs:{disabled:!0,placeholder:"用逗号隔开，单个标签少于12字节"},model:{value:e.form1.tagLabels,callback:function(t){e.$set(e.form1,"tagLabels",t)},expression:"form1.tagLabels"}})],1),e._v(" "),l("div",{staticClass:"tableOverstyle"},[l("table",{staticClass:"el-table el-table__body el-table--border",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[l("colgroup",[l("col",{attrs:{name:"el-table_1_column_1",width:"25%"}}),e._v(" "),l("col",{attrs:{name:"el-table_1_column_2",width:"75%"}})]),e._v(" "),l("tbody",[l("tr",{staticClass:"el-table__row"},[l("td",[l("div",{staticClass:"cell"},[e._v("发布来源")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},["1"==e.form1.publishSource?l("span",[e._v("PC后台")]):e._e(),"2"==e.form1.publishSource?l("span",[e._v("数据爬取")]):e._e(),"3"==e.form1.publishSource?l("span",[e._v("APP端")]):e._e()])])]),e._v(" "),l("tr",{staticClass:"el-table__row"},[l("td",[l("div",{staticClass:"cell"},[e._v("文章ID")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.articleId))])])]),e._v(" "),l("tr",{staticClass:"el-table__row"},[l("td",[l("div",{staticClass:"cell"},[e._v("状态")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},["0"==e.form1.status?l("span",[e._v("新建")]):e._e(),"1"==e.form1.status?l("span",[e._v("待审核")]):e._e(),"3"==e.form1.status?l("span",[e._v("审核中")]):e._e(),e._v(" "),"4"==e.form1.status?l("span",[e._v("已上线")]):e._e(),"5"==e.form1.status?l("span",[e._v("已下线")]):e._e()])])])])]),e._v(" "),l("table",{staticClass:"el-table el-table__body el-table--border marT20",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[l("colgroup",[l("col",{attrs:{name:"el-table_1_column_1"}}),e._v(" "),l("col",{attrs:{name:"el-table_1_column_1"}}),e._v(" "),l("col",{attrs:{name:"el-table_1_column_1"}}),e._v(" "),l("col",{attrs:{name:"el-table_1_column_2"}})]),e._v(" "),l("tbody",[l("tr",{staticClass:"el-table__row"},[l("td",[l("div",{staticClass:"cell"})]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v("时间")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v("操作账号")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v("备注")])])]),e._v(" "),l("tr",{staticClass:"el-table__row"},[l("td",[l("div",{staticClass:"cell"},[e._v("创建时间")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.createTime))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.createUser))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"})])]),e._v(" "),l("tr",{staticClass:"el-table__row"},[l("td",[l("div",{staticClass:"cell"},[e._v("上线时间")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.onlineTime))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.onlineUser))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"})])]),e._v(" "),l("tr",{staticClass:"el-table__row"},[l("td",[l("div",{staticClass:"cell"},[e._v("下线时间")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.offlineTime))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.offlineUser))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"})])]),e._v(" "),l("tr",{staticClass:"el-table__row"},[l("td",[l("div",{staticClass:"cell"},[e._v("修改时间")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.updateTime))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.updateUser))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"})])]),e._v(" "),l("tr",{staticClass:"el-table__row"},[l("td",[l("div",{staticClass:"cell"},[e._v("审核时间")])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s(e.form1.checkTime))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},[e._v(e._s("涉及敏感词"==e.form1.checkReason?"机审":e.form1.checkPerson))])]),e._v(" "),l("td",[l("div",{staticClass:"cell"},["3"==e.form1.status?l("p",[e._v(e._s("其它"==e.form1.checkReason?e.form1.checkMessage:e.form1.checkReason))]):e._e()])])])])])])],1)])],1)],1)},staticRenderFns:[]};var r=l("VU/8")(a,i,!1,function(e){l("yJBA")},null,null);t.default=r.exports},yJBA:function(e,t){}});
//# sourceMappingURL=19.529cd267b9fa96022e3e.js.map