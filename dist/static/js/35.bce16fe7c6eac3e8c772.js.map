{"version":3,"sources":["webpack:///src/pages/market-add.vue","webpack:///./src/pages/market-add.vue?d6cc","webpack:///./src/pages/market-add.vue"],"names":["market_add","_this","this","header","list","script","indent","color","background","align","required","message","trigger","pattern","callback","validator","Object","auth","_this2","data","res","val","file","name","showUrl","_this3","valid","FormData","tokenId","title","content","userId","imgType","status","classifyType","filename","msg","raw","quill","_ref","text","html","fileList","url","dialogImageUrl","_this4","then","_","back","done","catch","pages_market_add","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","min-width","padding","attrs","separator-class","to","path","_v","size","on","click","fanhui","$event","saveAudit","ref","model","form2","label-width","rules","rules2","width","float","margin-left","margin-right","label","prop","type","autosize","placeholder","value","$$v","$set","expression","getContent","onEditorChange","toolbar","has-border","border","zIndex","sync-output","syncOutput","theme","disabled","fullscreen","full","upload","uploadImg","blur","onEditorBlur","_l","item","key","id","nickName","change","radioChange","directives","rawName","action","multiple","limit","file-list","list-type","auto-upload","on-change","fileChange","on-exceed","fileOver","on-preview","handlePictureCardPreview","on-remove","handleRemove","visible","dialogVisible","update:visible","src","alt","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/35.bce16fe7c6eac3e8c772.js","sourcesContent":["<template>\r\n    <div class=\"page-body market_add\" style=\"min-width:980px;\">\r\n        <div class=\"breadcrumb\" style=\"padding:8px;\">\r\n            <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">内容中心</el-breadcrumb-item>\r\n                <el-breadcrumb-item>行业信息</el-breadcrumb-item>\r\n                <el-breadcrumb-item>添加行情</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"box\">\r\n            <div class=\"text-right\">\r\n                <el-button size=\"small\" @click=\"fanhui\" class=\"light_btn\">返回</el-button>\r\n                <el-button size=\"small\" class=\"light_btn\" @click=\"saveAudit('form2',1)\">仅保存</el-button>\r\n                <el-button size=\"small\" class=\"light_btn\" @click=\"saveAudit('form2',2)\">保存并提交审核</el-button>\r\n            </div>\r\n            <el-form ref=\"form2\" :model=\"form2\" label-width=\"84px\" :rules=\"rules2\" class=\"up_form clearfix\">\r\n              <div style=\"width: 48%;float: left;padding:15px;margin-left:2%;margin-right:5%;\">\r\n                <el-form-item label=\"文章标题\" prop=\"title\">\r\n                    <el-input style=\"width:420px\" type=\"textarea\" autosize v-model=\"form2.title\" placeholder=\"请输入标题\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"文章内容\" prop=\"content\" class=\"editor\">\r\n                  <m-quill-editor ref=\"myQuillEditor\" v-model=\"form2.content\"\r\n                  :width=\"quill.width\" :getContent=\"onEditorChange\" :toolbar=\"quill.toolbar\"\r\n                  :has-border=\"quill.border\" :zIndex=\"quill.zIndex\"\r\n                  :sync-output=\"quill.syncOutput\" \r\n                  :theme=\"quill.theme\"\r\n                  :disabled=\"quill.disabled\"\r\n                  :fullscreen=\"quill.full\"\r\n                  @upload=\"uploadImg\" @blur=\"onEditorBlur($event)\"\r\n                  ></m-quill-editor>\r\n                </el-form-item>\r\n              </div>\r\n              <div style=\"width: 35%;float:left;padding:15px;min-width:420px;\" >\r\n                <el-form-item label=\"发布到:\" required>\r\n                    <el-input :disabled=\"true\" v-model=\"form2.classifyTypes\" style=\"width:173px;\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"所属分类:\" prop=\"classifyType\">\r\n                  <el-select v-model=\"form2.classifyType\" name=\"classifyType\" placeholder=\"请选择\">\r\n                    <el-option\r\n                      v-for=\"item in classifyTypeAll\"\r\n                      :key=\"item.id\"\r\n                      :label=\"item.name\"\r\n                      :value=\"item.id\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item class=\"fabuStyle\" label=\"发布账号:\" prop=\"userId\">\r\n                  <el-select v-model=\"form2.userId\" placeholder=\"请选择发布账号\">\r\n                    <el-option \r\n                      v-for=\"item in accounts\"\r\n                      :key=\"item.userId\"\r\n                      :label=\"item.nickName\"\r\n                      :value=\"item.userId\"\r\n                    ></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"附加选项:\" prop=\"imgType\" >\r\n                    <el-radio-group v-model=\"form2.imgType\" @change=\"radioChange\">\r\n                        <el-radio label=\"1\">上传缩略图</el-radio>\r\n                        <el-radio label=\"2\">提取第一个图为缩略图</el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"封面图:\" prop=\"icon\" ref=\"icon\" v-show=\"form2.imgType == '1'\">\r\n                  <el-upload\r\n                    action=\"\" :multiple=\"false\" :limit='1'\r\n                    ref=\"upload\" name=\"newsFile\" :file-list=\"fileList\"\r\n                    list-type=\"picture-card\" :auto-upload=\"false\"\r\n                    :on-change=\"fileChange\" :on-exceed=\"fileOver\"\r\n                    :on-preview=\"handlePictureCardPreview\"\r\n                    :on-remove=\"handleRemove\">\r\n                    <i class=\"el-icon-plus\"></i>\r\n                  </el-upload>\r\n                  <el-dialog :visible.sync=\"dialogVisible\">\r\n                    <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n                  </el-dialog>\r\n                </el-form-item>\r\n                <el-form-item label=\"Tag标签:\" prop=\"tagLabel\">\r\n                    <el-input placeholder=\"用逗号隔开，单个标签少于12字节\" v-model=\"form2.tagLabel\"></el-input>\r\n                </el-form-item>\r\n              </div>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { getBaceUrl } from '@/utils/auth';\r\nimport myVali from '@/utils/myVali'\r\nexport default {\r\n  data() {\r\n    var valiIcon = (rule, value, callback) => { // 图片验证\r\n      if (!this.hasFmt) {\r\n        callback(new Error('请上传封面图'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    var valiTag=(rule,value,callback) => {\r\n      if (value === '') {\r\n        callback();\r\n      } else {\r\n        var v = value.replace(/，/ig,',');\r\n        var arr = v.split(',');\r\n        arr.map(item => {\r\n          if(item.replace(/[^\\x00-\\xff]/g,\"aa\").length>12){\r\n            callback(new Error('单个tag标签不能超过12字节!'))\r\n          }else{\r\n            callback();\r\n          }\r\n        })\r\n      }\r\n    };\r\n    return {\r\n      hasFmt:false,\r\n      fileList:[],\r\n      accounts:[],\r\n      quill: {\r\n        width: 420,\r\n\t\t\t\tborder: true,\r\n\t\t\t\theight:150,\r\n\t\t\t\tzIndex:101,\r\n        content: 'wellcome ~',\r\n        syncOutput: true,\r\n        theme: 'snow', //bubble snow\r\n        disabled: false,\r\n        full: false,\r\n        toolbar: [\r\n          ['bold', 'italic', 'underline', 'strike', 'link', {'header': [1, 2, 3, 4, 5, 6, false]}],\r\n          ['blockquote', 'code-block'],\r\n          [{'list': 'ordered'}, {'list': 'bullet'}],\r\n          [{ 'script': 'sub'}, { 'script': 'super' }],\r\n          [{ 'indent': '-1'}, { 'indent': '+1' }],\r\n          [{'color': []}, {'background': []}],\r\n          [{ 'align': [false, 'right', 'center', 'justify'] }],\r\n          ['image', 'video'],\r\n        ]\r\n      },\r\n      baceUrl:'',\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      classifyTypeAll:'',\r\n      form2: {\r\n        title: '',\r\n        content: '',\r\n        classifyTypes: '行情',\r\n        userId: '',\r\n        imgType: '1',\r\n        tagLabel: '',\r\n        resource: '',\r\n        source:'',\r\n        type: [],\r\n        desc: '',\r\n        author: '',\r\n        img: '',\r\n        //未置顶\r\n        topFlag:'0',\r\n//              排序\r\n        orderNum:'0'\r\n      },\r\n      uploadData: {},\r\n\t    value: '',\r\n      rules2: {\r\n        title: [\r\n          {required:true, validator: myVali.checkTitle, trigger: 'blur' }  // 图片验证\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入内容', trigger: 'change' },\r\n          {pattern:/[0-9\\u4e00-\\u9fa5]+/g,message:'内容必须有中文或者数字',trigger:'blur'}\r\n        ],\r\n        userId: [\r\n          { required: true, message: '请选择发布账号', trigger: 'change' }\r\n        ],\r\n        imgType: [\r\n          { required: true, message: '请选择图片', trigger: 'change' }\r\n        ],\r\n        icon:[\r\n          {required:true, validator: valiIcon, trigger: 'change' }  // 图片验证\r\n        ],\r\n        classifyType:[\r\n          { required: true, message: '请选择所属分类', trigger: 'blur' },\r\n        ],\r\n        tagLabel:[\r\n          { validator: valiTag, trigger: 'blur' }\r\n        ]\r\n      }  \r\n            \r\n    };\r\n\t},\r\n\t\tcreated(){\r\n\t\t\tthis.baceUrl = getBaceUrl();\r\n\t\t},\r\n    mounted() {\r\n    \tthis.$get('/industryCategory/findIndustryCategoryList',{tokenId:this.$store.state.user.tokenId}).then(res => {\r\n    \t\tconsole.log(res.data)\r\n    \t\tthis.classifyTypeAll = res.data\r\n    \t});\r\n    \t this.$post('members/findByLevel',{tokenId:this.$store.state.user.tokenId,levelCode:100002}).then(res => {\r\n        console.log(res)\r\n        this.accounts = res.data;\r\n      })\r\n    },\r\n    methods: {\r\n      radioChange(val){\r\n        console.log(val)\r\n        if(val == '2'){\r\n          this.hasFmt = true;\r\n        }else{\r\n          if(!this.fileList){\r\n            this.hasFmt=false;\r\n          }\r\n        }\r\n      },\r\n    \t// 富文本图片上传\r\n\t\t\tuploadImg(file,insert){\r\n\t\t\t\tconsole.log(file)\r\n\t\t\t\tlet params = new FormData(); // 创建form对象\r\n\t\t\t\tparams.append('file',file,file.name);\r\n\t\t\t\t// params.append('name',file.name);\r\n\t\t\t\tconsole.log(file.name)\r\n\t\t\t\t\r\n\t\t\t\tthis.$post('images/upload',params).then(res => {\r\n\t\t\t\t\tlet url = res.data[0].showUrl;\r\n\t\t\t\t\t// console.log(url)\r\n\t\t\t\t\tinsert(url, 'center')\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfileOver(){\r\n\t\t\t\tthis.$message('只允许添加一张图片,如果替换请删除后再上传');\r\n\t\t\t},\r\n\t\t\t//仅保存\r\n\t\t\tsaveAudit(formName, status) {\r\n\t\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\t\tconsole.log(valid);\r\n\t\t\t\t\tif (valid) {\r\n            if(this.form2.imgType == 2){\t// 封面图的类型 \r\n              var reg = /src=/ig;\r\n\t\t\t\t\t\t\tif(!this.form2.content.match(reg)){\r\n                 this.$message.error('内容里没有图片!');\r\n                 return;\r\n              }\r\n            }\r\n            let param = new FormData();\r\n            param.append('tokenId',this.$store.state.user.tokenId);\r\n            param.append('title',this.form2.title);  \r\n            param.append('content',this.form2.content);\r\n            param.append('userId',this.form2.userId);\r\n            param.append('imgType',this.form2.imgType);\r\n            param.append('tagLabel',this.form2.tagLabel.replace(/，/ig,','));\r\n            param.append('publishSource','1');\r\n            param.append('status',status);\r\n            param.append('classifyType',this.form2.classifyType);\r\n            param.append('newsFile',this.form2.file,this.form2.filename);\r\n            this.$post('industry/save', param).then(res => {\r\n              if (res.code == 0) {\r\n                this.$message({\r\n                  message: res.msg,\r\n                  type: 'success'\r\n                });\r\n                setTimeout(() => {\r\n                  this.$router.push({name: 'market'});\r\n                }, 1000);\r\n              }\r\n            });\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tconsole.log('error submit!!');\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t\t//图片的验证\r\n\t\t\tfileChange(file,fileList){\r\n        this.$refs['icon'].clearValidate(); // 图片验证\r\n        this.form2.filename = file.name;\r\n        this.form2.file = file.raw;\r\n\t\t\t\t// console.log(file)\r\n\t\t\t\tif(fileList.length>0){\r\n\t\t\t\t\tthis.hasFmt = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tonEditorBlur(quill) {\r\n\t\t\t\t\tconsole.log('editor blur!', quill);\r\n\t\t\t\t\tconsole.log(this.form2.content);\r\n\t\t\t},\r\n\t\t\tonEditorFocus(quill) {\r\n\t\t\t\t\tconsole.log('editor focus!', quill);\r\n\t\t\t},\r\n\t\t\tonEditorReady(quill) {\r\n\t\t\t\t\tconsole.log('editor ready!', quill);\r\n\t\t\t},\r\n\t\t\tonEditorChange({ quill, html, text }) {\r\n\t\t\t\t\tconsole.log('editor change!', quill, html, text);\r\n\t\t\t\t\tthis.content = html;\r\n\t\t\t},\r\n\t\t\t// 文件上传的删除  和放大!\r\n\t\t\thandleRemove(file, fileList) {\r\n\t\t\t\t\talert('删除');\r\n\t\t\t\t\tconsole.log(file, fileList);\r\n\t\t\t},\r\n\t\t\thandlePictureCardPreview(file) {\r\n\t\t\t\t\tthis.dialogImageUrl = file.url;\r\n\t\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t\t\tconsole.log(this.dialogImageUrl);\r\n\t\t\t\t\talert('放大');\r\n\t\t\t},\r\n\t\t\t fanhui(){\r\n        this.$confirm('返回已编辑内容将重置是否继续？')\r\n          .then(_ => {\r\n            this.$router.back();\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n      }\r\n    }\r\n};\r\n</script>\r\n<style type=\"text/css\">\r\n.market_add .el-upload--picture-card{\r\n\twidth: 80px;\r\n\theight: 80px;\r\n\tline-height: 88px;\r\n}\r\n.up_form .el-input__inner {\r\n    height: 30px;\r\n    line-height: 30px;\r\n    max-width: 300px;\r\n}\r\n.up_form .quill-editor .ql-container {\r\n    min-height: 550px;\r\n}\r\n/*.app-container .app-page-body{\r\n\t\tmin-height: 890px !important;\r\n\t}*/\r\n\t.quill-editor .ql-toolbar.ql-snow{\r\n\t\theight: 60px;\r\n\t}\r\n\t.editor .el-form-item__content {\r\n\t\tline-height: 20px;\r\n\t}\r\n\t\r\n\t.up_form .el-input__inner{\r\n\t\theight: 30px;\r\n\t\tline-height: 30px;\r\n\t\tmax-width: 300px;\r\n\t}\r\n\t.up_form .quill-editor .ql-container{\r\n\t\theight: 550px;\r\n\t\toverflow-y: auto;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/market-add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-body market_add\",staticStyle:{\"min-width\":\"980px\"}},[_c('div',{staticClass:\"breadcrumb\",staticStyle:{\"padding\":\"8px\"}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"内容中心\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"行业信息\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"添加行情\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"text-right\"},[_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.fanhui}},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.saveAudit('form2',1)}}},[_vm._v(\"仅保存\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.saveAudit('form2',2)}}},[_vm._v(\"保存并提交审核\")])],1),_vm._v(\" \"),_c('el-form',{ref:\"form2\",staticClass:\"up_form clearfix\",attrs:{\"model\":_vm.form2,\"label-width\":\"84px\",\"rules\":_vm.rules2}},[_c('div',{staticStyle:{\"width\":\"48%\",\"float\":\"left\",\"padding\":\"15px\",\"margin-left\":\"2%\",\"margin-right\":\"5%\"}},[_c('el-form-item',{attrs:{\"label\":\"文章标题\",\"prop\":\"title\"}},[_c('el-input',{staticStyle:{\"width\":\"420px\"},attrs:{\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"请输入标题\"},model:{value:(_vm.form2.title),callback:function ($$v) {_vm.$set(_vm.form2, \"title\", $$v)},expression:\"form2.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"editor\",attrs:{\"label\":\"文章内容\",\"prop\":\"content\"}},[_c('m-quill-editor',{ref:\"myQuillEditor\",attrs:{\"width\":_vm.quill.width,\"getContent\":_vm.onEditorChange,\"toolbar\":_vm.quill.toolbar,\"has-border\":_vm.quill.border,\"zIndex\":_vm.quill.zIndex,\"sync-output\":_vm.quill.syncOutput,\"theme\":_vm.quill.theme,\"disabled\":_vm.quill.disabled,\"fullscreen\":_vm.quill.full},on:{\"upload\":_vm.uploadImg,\"blur\":function($event){_vm.onEditorBlur($event)}},model:{value:(_vm.form2.content),callback:function ($$v) {_vm.$set(_vm.form2, \"content\", $$v)},expression:\"form2.content\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"35%\",\"float\":\"left\",\"padding\":\"15px\",\"min-width\":\"420px\"}},[_c('el-form-item',{attrs:{\"label\":\"发布到:\",\"required\":\"\"}},[_c('el-input',{staticStyle:{\"width\":\"173px\"},attrs:{\"disabled\":true},model:{value:(_vm.form2.classifyTypes),callback:function ($$v) {_vm.$set(_vm.form2, \"classifyTypes\", $$v)},expression:\"form2.classifyTypes\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所属分类:\",\"prop\":\"classifyType\"}},[_c('el-select',{attrs:{\"name\":\"classifyType\",\"placeholder\":\"请选择\"},model:{value:(_vm.form2.classifyType),callback:function ($$v) {_vm.$set(_vm.form2, \"classifyType\", $$v)},expression:\"form2.classifyType\"}},_vm._l((_vm.classifyTypeAll),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}))],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"fabuStyle\",attrs:{\"label\":\"发布账号:\",\"prop\":\"userId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择发布账号\"},model:{value:(_vm.form2.userId),callback:function ($$v) {_vm.$set(_vm.form2, \"userId\", $$v)},expression:\"form2.userId\"}},_vm._l((_vm.accounts),function(item){return _c('el-option',{key:item.userId,attrs:{\"label\":item.nickName,\"value\":item.userId}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"附加选项:\",\"prop\":\"imgType\"}},[_c('el-radio-group',{on:{\"change\":_vm.radioChange},model:{value:(_vm.form2.imgType),callback:function ($$v) {_vm.$set(_vm.form2, \"imgType\", $$v)},expression:\"form2.imgType\"}},[_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"上传缩略图\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"2\"}},[_vm._v(\"提取第一个图为缩略图\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form2.imgType == '1'),expression:\"form2.imgType == '1'\"}],ref:\"icon\",attrs:{\"label\":\"封面图:\",\"prop\":\"icon\"}},[_c('el-upload',{ref:\"upload\",attrs:{\"action\":\"\",\"multiple\":false,\"limit\":1,\"name\":\"newsFile\",\"file-list\":_vm.fileList,\"list-type\":\"picture-card\",\"auto-upload\":false,\"on-change\":_vm.fileChange,\"on-exceed\":_vm.fileOver,\"on-preview\":_vm.handlePictureCardPreview,\"on-remove\":_vm.handleRemove}},[_c('i',{staticClass:\"el-icon-plus\"})]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tag标签:\",\"prop\":\"tagLabel\"}},[_c('el-input',{attrs:{\"placeholder\":\"用逗号隔开，单个标签少于12字节\"},model:{value:(_vm.form2.tagLabel),callback:function ($$v) {_vm.$set(_vm.form2, \"tagLabel\", $$v)},expression:\"form2.tagLabel\"}})],1)],1)])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-275bd155\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/market-add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-275bd155\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./market-add.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./market-add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./market-add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-275bd155\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./market-add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/market-add.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}