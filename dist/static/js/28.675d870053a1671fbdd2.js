webpackJsonp([28],{P1WC:function(e,t){},gUsY:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("TIfe"),l=(o("mtWM"),{components:{},data:function(){return{type:"新闻",imgFullSrc:"",imgSrc:"",pkg:"",quill:{width:420,border:!0,height:150,zIndex:1,content:"wellcome ~",syncOutput:!1,theme:"snow",disabled:!0,full:!1,toolbar:[[{header:1},{header:2}],["bold","italic","underline","strike","link"]]},uploadData:{},baceUrl:"",status:"",editorOption:{},dialogImageUrl:"",dialogVisible:!1,bannerDialog:!1,form1:{title:"",content:"",column:"新闻资讯",sourceType:"1",source:"",status:"",author:"",userId:"1",imgType:"1",newsFile:"",tagLabels:"",keyWords:"",coverImgId:""},idDetail:"",cities:[],rules1:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"change"}],sourceType:[{required:!0,message:"请选择来源",trigger:"change"}],userId:[{required:!0,message:"请选择发布账号",trigger:"change"}],imgType:[{required:!0,message:"请选择图片",trigger:"change"}],source:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},created:function(){this.baceUrl=Object(s.a)(),this.getParams(),console.log(this.idDetail),this.showNews()},mounted:function(){},methods:{onOff:function(e,t){var o=this;this.$confirm("确定要"+t+"该新闻吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={tokenId:o.$store.state.user.tokenId,status:e,id:o.form1.id};o.$post("news/isOnline",t).then(function(e){setTimeout(function(){o.$router.push({name:"news"})},1e3),o.$message({type:"success",message:e.msg})})}).catch(function(){o.$message({type:"info",message:res.msg})})},toAudit:function(){var e=this;this.$confirm("确认要提交审核吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){var t={tokenId:e.$store.state.user.tokenId,ids:e.form1.id};console.log(t),e.$post("news/batchWaitCheck",t).then(function(t){setTimeout(function(){e.$router.push({name:"news"})},1e3),e.$message({type:"success",message:t.msg})})}).catch(function(){e.$message({type:"info",message:res.msg})})},showNews:function(){var e=this,t={tokenId:this.$store.state.user.tokenId,id:this.idDetail};this.$get("news/show",t).then(function(t){e.form1=t.data[0],console.log(e.form1),e.imgSrc=e.form1.coverImgId,e.status=e.form1.status,e.imgFullSrc=e.baceUrl+e.imgSrc})},getParams:function(){var e=this.$route.params.id;this.idDetail=e},uploadImg:function(e,t){var o=this;console.log(e);var s=new FormData;s.append("file",e,e.name),console.log(e.name),this.$post("images/upload",s).then(function(e){var s=o.baceUrl+e.data[0].showUrl;t(s,"center"),console.log(e)})},getFullUrl:function(){return this.baceUrl+"/news/add"},test:function(){console.log(this.form1.source)},onEditorBlur:function(e){e.quill,e.html,e.text;console.log(this.form1.content)},onEditorFocus:function(e){console.log("editor focus!",e)},onEditorReady:function(e){console.log("editor ready!",e)},onEditorChange:function(e){console.log("editor change!",e)},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}},watch:{$route:"getParams"}}),r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page-body news_lookes",staticStyle:{"min-width":"980px"}},[o("el-dialog",{attrs:{center:"",width:"375px",visible:e.bannerDialog,"append-to-body":"",id:"div1"},on:{"update:visible":function(t){e.bannerDialog=t}}},[o("el-form",{ref:"form1",staticClass:"form1",attrs:{data:e.form1,"label-width":"110px"}},[o("p",{attrs:{id:"p1"}},[e._v(e._s(e.form1.title))]),e._v(" "),o("p",{attrs:{id:"p2"},domProps:{innerHTML:e._s(e.form1.content)}})])],1),e._v(" "),o("div",{staticClass:"breadcrumb",staticStyle:{padding:"8px"}},[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("内容中心")]),e._v(" "),o("el-breadcrumb-item",[e._v("行业信息")]),e._v(" "),o("el-breadcrumb-item",[e._v("查看新闻资讯")])],1)],1),e._v(" "),o("div",{staticClass:"box"},[o("div",{staticClass:"text-right"},[o("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(t){e.$router.back()}}},[e._v("返回")]),e._v(" "),o("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(t){e.bannerDialog=!0}}},[e._v("预览")]),e._v(" "),"0"==e.status?o("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(t){e.toAudit()}}},[e._v("提交审核")]):e._e(),e._v(" "),"5"==e.status?o("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:function(t){e.onOff("4","上线")}}},[e._v("上线")]):e._e()],1),e._v(" "),o("el-form",{ref:"form1",staticClass:"up_form clearfix",attrs:{model:e.form1,"label-width":"80px",rules:e.rules1}},[o("div",{staticStyle:{width:"48%",float:"left",padding:"15px","margin-left":"2%","margin-right":"5%"}},[o("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form1.title,callback:function(t){e.$set(e.form1,"title",t)},expression:"form1.title"}})],1),e._v(" "),o("el-form-item",{staticClass:"editor",attrs:{label:"文章内容",prop:"content"}},[o("m-quill-editor",{ref:"myQuillEditor",attrs:{width:e.quill.width,getContent:e.onEditorChange,"has-border":e.quill.border,zIndex:e.quill.zIndex,"sync-output":e.quill.syncOutput,theme:e.quill.theme,disabled:e.quill.disabled,fullscreen:e.quill.full},on:{upload:e.uploadImg,blur:function(t){e.onEditorBlur(t)}},model:{value:e.form1.content,callback:function(t){e.$set(e.form1,"content",t)},expression:"form1.content"}})],1)],1),e._v(" "),o("div",{staticStyle:{width:"35%",float:"left",padding:"15px"}},[o("el-form-item",{attrs:{label:"发布到:"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"来源:",prop:"sourceType"}},[o("el-radio-group",{on:{change:function(t){e.test()}},model:{value:e.form1.sourceType,callback:function(t){e.$set(e.form1,"sourceType",t)},expression:"form1.sourceType"}},[o("el-radio",{attrs:{label:"1",disabled:""}},[e._v("原创")]),e._v(" "),o("el-radio",{attrs:{label:"2",disabled:""}},[e._v("转载")])],1),e._v(" "),2==e.form1.sourceType?o("el-select",{staticStyle:{"margin-left":"20px",width:"140px"},attrs:{disabled:"",placeholder:"请选择来源"},model:{value:e.form1.source,callback:function(t){e.$set(e.form1,"source",t)},expression:"form1.source"}},e._l(e.cities,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})):e._e()],1),e._v(" "),o("el-form-item",{attrs:{label:"作者:"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form1.author,callback:function(t){e.$set(e.form1,"author",t)},expression:"form1.author"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"发布账号:",prop:"userId","label-width":"82"}},[o("el-select",{attrs:{disabled:""},model:{value:e.form1.userId,callback:function(t){e.$set(e.form1,"userId",t)},expression:"form1.userId"}},[o("el-option",{attrs:{label:"小号1",value:"shanghai"}}),e._v(" "),o("el-option",{attrs:{label:"小号2",value:"beijing"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"附加选项:",prop:"sourceType","label-width":"82"}},[o("el-radio-group",{model:{value:e.form1.sourceType,callback:function(t){e.$set(e.form1,"sourceType",t)},expression:"form1.sourceType"}},[o("el-radio",{attrs:{label:"1",disabled:""}},[e._v("上传缩略图")]),e._v(" "),o("el-radio",{attrs:{label:"2",disabled:""}},[e._v("提取第一个图为缩略图")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"封面图"}},[o("img",{staticClass:"imgs",attrs:{src:e.imgFullSrc,alt:"封面图展示"}})]),e._v(" "),o("el-form-item",{attrs:{label:"Tag标签:"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form1.tagLabels,callback:function(t){e.$set(e.form1,"tagLabels",t)},expression:"form1.tagLabels"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"关键词:"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form1.keyWords,callback:function(t){e.$set(e.form1,"keyWords",t)},expression:"form1.keyWords"}})],1)],1)])],1)],1)},staticRenderFns:[]};var a=o("VU/8")(l,r,!1,function(e){o("P1WC")},null,null);t.default=a.exports}});
//# sourceMappingURL=28.675d870053a1671fbdd2.js.map