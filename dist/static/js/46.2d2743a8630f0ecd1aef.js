webpackJsonp([46],{"9L85":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("TIfe"),l={data:function(){return{radio:"",powerDia:!1,identityDia:!1,checkOp:[],checkList:[],idDetail:"",nums:{},flag1:!0,flag2:!0,flag3:!0,flag4:!0,data1:{nickName:"",sex:"",userId:"",cityId:"",phone:"",birthday:"",idCard:"",userDesc:"",createTime:"",loginTime:"",mobileModel:"",fullUrl:""},data3:{mobileOs:""},activeName:"first",tableData:[],thirdAccount:[],baceUrl:""}},created:function(){this.baceUrl=Object(e.a)(),this.getParams(),this.baseInfo()},methods:{baseInfo:function(){var t=this,s={tokenId:this.$store.state.user.tokenId,userId:this.idDetail};this.$post("/members/getBaseInfo",s).then(function(s){s.data&&(t.data1=s.data[0],t.radio=t.data1.rankCode,"2"==t.data1.sex?t.data1.sex1="女":1==t.data1.sex?t.data1.sex1="男":t.data1.sex1="未设置","100002"==t.data1.identityCode?t.data1.identityTrans="内部小号":"100003"==t.data1.identityCode?t.data1.identityTrans="内部大号":"100001"==t.data1.identityCode&&("1001"==t.data1.rankCode?t.data1.identityTrans="普通会员":t.data1.identityTrans="认证会员"))})},getParams:function(){var t=this.$route.params.id;this.idDetail=t},setIdentity:function(){this.identityDia=!0},setPower:function(){var t=this;this.powerDia=!0,this.$post("members/prohibit/findList",{tokenId:this.$store.state.user.tokenId,status:"1"}).then(function(s){t.checkOp=s.data;var a={tokenId:t.$store.state.user.tokenId,userId:t.idDetail};t.$post("members/getPermissions",a).then(function(s){s.data[0]&&(t.checkList=s.data[0].prohibitCodes.split(","))})})},changeIdentity:function(){var t=this,s={tokenId:this.$store.state.user.tokenId,rankCode:this.radio,userId:this.idDetail};this.$post("/members/updateLevel",s).then(function(s){0==s.code&&(t.identityDia=!1,t.userId="",t.baseInfo(),t.$message({message:s.msg,type:"success"}))})},changePower:function(){var t=this,s={tokenId:this.$store.state.user.tokenId,prohibitCodes:this.checkList.join(","),userId:this.idDetail};this.$post("members/setPermissions",s).then(function(s){console.log(s),0==s.code?(t.$message({message:s.msg,type:"success"}),t.powerDia=!1):t.$message({message:"设置失败请重试!",type:"error"})})},handleClick:function(t,s){console.log(t),"second"==t.name&&this.flag1?this.userData():"third"==t.name&&this.flag2?this.UserProhibit():"fourth"==t.name&&this.flag3?this.otherInfo():"fifth"==t.name&&this.flag4&&this.getThird()},userData:function(){var t=this,s={tokenId:this.$store.state.user.tokenId,userId:this.idDetail};this.$post("members/getUserData",s).then(function(s){s.data.map(function(s){"news"==s.title?t.nums.news=s.num:"videoNews"==s.title?t.nums.videoNews=s.num:"comment"==s.title?t.nums.comment=s.num:"fans"==s.title?t.nums.fans=s.num:"attentions"==s.title?t.nums.attentions=s.num:"goods"==s.title?t.nums.goods=s.num:"obtainGoods"==s.title?t.nums.obtainGoods=s.num:"follows"==s.title?t.nums.follows=s.num:"fansImport"==s.title?t.nums.fansImport=s.num:"attentionsImport"==s.title?t.nums.attentionsImport=s.num:"likes"==s.title&&(t.nums.likes=s.num)}),t.flag1=!1})},UserProhibit:function(){var t=this,s={tokenId:this.$store.state.user.tokenId,userId:this.idDetail};this.$post("/members/getUserProhibit",s).then(function(s){console.log(s.data),t.tableData=s.data,t.flag2=!1})},getThird:function(){var t=this;console.log("关联账号");var s={tokenId:this.$store.state.user.tokenId,userId:this.idDetail};this.$post("/members/getUserThird",s).then(function(s){console.log(s.data),t.thirdAccount=s.data,t.flag4=!1})},otherInfo:function(){var t=this,s={tokenId:this.$store.state.user.tokenId,userId:this.idDetail};this.$post("/members/getUserOtherInfo",s).then(function(s){if(s.data[0]){console.log(s.data);var a=s.data;t.data3=a[0],t.flag3=!1}})},miniTable:function(t){return"miniTable"}}},i={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"page-body member_info"},[a("div",{staticClass:"page-header"},[a("div",{staticClass:"text-right"},[a("el-button",{staticClass:"light_btn",attrs:{size:"mini"},on:{click:function(s){t.$router.back()}}},[t._v("返回")]),t._v(" "),"100001"==t.data1.identityCode?a("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:t.setIdentity}},[t._v("身份设置")]):t._e(),t._v(" "),"100001"==t.data1.identityCode?a("el-button",{staticClass:"light_btn",attrs:{size:"small"},on:{click:t.setPower}},[t._v("权限设置")]):t._e()],1),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(s){t.activeName=s},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[a("div",[a("p",{staticClass:"info_title"},[t._v("基本信息")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"avatar",staticStyle:{height:"217px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.data1.headImgUrl,alt:"暂无头像"}})])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"el-table__body-wrapper is-scrolling-none info_table"},[a("table",{staticClass:"el-table el-table__body el-table--border",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("colgroup",[a("col",{attrs:{name:"el-table_1_column_1",width:"15%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_2",width:"35%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_3",width:"15%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_4",width:"35%"}})]),t._v(" "),a("tbody",[a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("昵称")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.nickName))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("性别")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.sex1))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("用户ID")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.userCode))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("城市")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.address))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("手机号")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.phone))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("生日")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.birthday))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("身份")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.identityTrans))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("简介")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.userDesc))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("注册时间")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.createTime))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("最后登录时间")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.loginTime))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("登录设备")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data1.mobileModel))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"})]),t._v(" "),a("td",[a("div",{staticClass:"cell"})])])])])])])],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"用户数据",name:"second"}},[a("div",[a("p",{staticClass:"info_title"},[t._v("用户数据")]),t._v(" "),a("div",{staticClass:"el-table__body-wrapper is-scrolling-none info_table"},[a("table",{staticClass:"el-table el-table__body el-table--border",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("colgroup",[a("col",{attrs:{name:"el-table_1_column_1",width:"15%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_2",width:"35%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_3",width:"15%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_4",width:"35%"}})]),t._v(" "),a("tbody",[a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("发布文章")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.news?t.nums.news:0))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("获赞")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.obtainGoods?t.nums.obtainGoods:0))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("发布视频")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.videoNews?t.nums.videoNews:0))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("收藏")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.ikes?t.nums.ikes:0))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("发布广播")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("0")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("跟踪的专题")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.num7?t.nums.num7:0))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("发布评论")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.comment?t.nums.comment:0))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("点赞")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.goods?t.nums.goods:0))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("粉丝")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.fans?t.nums.fans:0))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("系统粉丝")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.fansImport?t.nums.fansImport:0))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("关注")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.attentions?t.nums.attentions:0))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("系统关注")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.nums.attentionsImport?t.nums.attentionsImport:0))])])])])])])])]),t._v(" "),a("el-tab-pane",{attrs:{label:"用户权限",name:"third"}},[a("div",[a("p",{staticClass:"info_title"},[t._v("用户权限")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"row-class-name":t.miniTable,"header-row-class-name":t.miniTable,data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"prohibitName",label:"用户权限",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"操作人",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"操作时间"}})],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"关联账号",name:"fifth"}},[a("div",[a("p",{staticClass:"info_title"},[t._v("关联账号")]),t._v(" "),a("el-table",{staticStyle:{width:"800px"},attrs:{"row-class-name":t.miniTable,"header-row-class-name":t.miniTable,data:t.thirdAccount,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"第三方",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"openId",label:"openID/UnionId/关联账号"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"220"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==s.row.isBinding?a("p",{staticClass:"yshx"},[t._v("已绑定")]):a("p",{staticClass:"yxx"},[t._v("未绑定")])]}}])})],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"其他信息",name:"fourth"}},[a("div",[a("p",{staticClass:"info_title"},[t._v("其他信息")]),t._v(" "),a("div",{staticClass:"el-table__body-wrapper is-scrolling-none info_table"},[a("table",{staticClass:"el-table el-table__body el-table--border",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("colgroup",[a("col",{attrs:{name:"el-table_1_column_1",width:"25%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_2",width:"25%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_3",width:"25%"}}),t._v(" "),a("col",{attrs:{name:"el-table_1_column_4",width:"25%"}})]),t._v(" "),a("tbody",[a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("项目")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("参数")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("项目")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("参数")])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("操作系统")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data3.mobileOs))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("版本")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data3.mobileOsVersion))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("手机型号")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data3.mobileModel))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("DEVICEID")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data3.deviceId))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("IMEI")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data3.imei))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v("IMSI")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data3.imsi))])])]),t._v(" "),a("tr",{staticClass:"el-table__row"},[a("td",[a("div",{staticClass:"cell"},[t._v("DEVICEID")])]),t._v(" "),a("td",[a("div",{staticClass:"cell"},[t._v(t._s(t.data3.deviceId))])]),t._v(" "),a("td",[a("div",{staticClass:"cell"})]),t._v(" "),a("td",[a("div",{staticClass:"cell"})])])])])])])])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改用户权限",visible:t.powerDia,width:"30%",center:""},on:{"update:visible":function(s){t.powerDia=s}}},[a("div",[a("el-checkbox-group",{attrs:{id:"checkList"},model:{value:t.checkList,callback:function(s){t.checkList=s},expression:"checkList"}},t._l(t.checkOp,function(s){return a("el-checkbox",{key:s.id,attrs:{label:s.prohibitCode}},[t._v(t._s(s.prohibitName))])}))],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"light_btn",on:{click:function(s){t.powerDia=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"light_btn",attrs:{type:"primary"},on:{click:t.changePower}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择会员身份",visible:t.identityDia,width:"30%",center:""},on:{"update:visible":function(s){t.identityDia=s}}},[a("div",{staticClass:"text-center"},[a("el-radio",{attrs:{label:"1001"},model:{value:t.radio,callback:function(s){t.radio=s},expression:"radio"}},[t._v("普通会员")]),t._v(" "),a("el-radio",{attrs:{label:"1002"},model:{value:t.radio,callback:function(s){t.radio=s},expression:"radio"}},[t._v("认证会员(带V身份标识）")])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"light_btn",on:{click:function(s){t.identityDia=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"light_btn",attrs:{type:"primary"},on:{click:t.changeIdentity}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(l,i,!1,function(t){a("Y/4a")},null,null);s.default=d.exports},"Y/4a":function(t,s){}});
//# sourceMappingURL=46.2d2743a8630f0ecd1aef.js.map