{"version":3,"sources":["webpack:///src/pages/market-add-old.vue","webpack:///./src/pages/market-add-old.vue?8af6","webpack:///./src/pages/market-add-old.vue"],"names":["market_add_old","_this","this","header","list","script","indent","color","background","align","form2","_form","defineProperty_default","required","message","trigger","pattern","callback","validator","Object","auth","argu","_this2","data","res","val","file","name","showUrl","_this3","valid","FormData","tokenId","title","content","userId","imgType","author","sourceType","status","classifyType","filename","source","msg","raw","quill","_ref","text","html","fileList","url","dialogImageUrl","_this4","then","_","done","catch","next","pages_market_add_old","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","min-width","padding","attrs","separator-class","to","path","_v","size","on","click","fanhui","$event","saveAudit","ref","model","label-width","rules","rules2","width","float","margin-left","margin-right","label","prop","type","autosize","placeholder","value","$$v","$set","expression","getContent","onEditorChange","toolbar","has-border","border","zIndex","sync-output","syncOutput","theme","disabled","fullscreen","full","upload","uploadImg","blur","onEditorBlur","span","filterable","_l","item","key","id","_e","nickName","change","radioChange","directives","rawName","action","multiple","limit","file-list","list-type","auto-upload","on-change","fileChange","on-exceed","fileOver","on-preview","handlePictureCardPreview","on-remove","handleRemove","visible","dialogVisible","update:visible","src","alt","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/58.5654ce11c0bf60aeb100.js","sourcesContent":["<template>\r\n  <div class=\"page-body market_add\" style=\"min-width:980px;\">\r\n    <div class=\"breadcrumb\" style=\"padding:8px;\">\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n          <el-breadcrumb-item :to=\"{ path: '/' }\">内容中心</el-breadcrumb-item>\r\n          <el-breadcrumb-item>发布内容</el-breadcrumb-item>\r\n          <el-breadcrumb-item>发布行情</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n    </div>\r\n    <div class=\"box\">\r\n      <div class=\"text-right\">\r\n        <el-button size=\"small\" @click=\"fanhui\" class=\"light_btn\">返回</el-button>\r\n        <el-button size=\"small\" class=\"light_btn\" @click=\"saveAudit('form2',1)\">仅保存</el-button>\r\n        <el-button size=\"small\" class=\"light_btn\" @click=\"saveAudit('form2',2)\">保存并提交审核</el-button>\r\n      </div>\r\n      <el-form ref=\"form2\" :model=\"form2\" label-width=\"84px\" :rules=\"rules2\" class=\"up_form clearfix\">\r\n        <div style=\"width: 48%;float: left;padding:15px;margin-left:2%;margin-right:5%;\">\r\n          <el-form-item label=\"文章标题:\" prop=\"title\">\r\n            <el-input style=\"width:420px\" type=\"textarea\" autosize v-model=\"form2.title\" placeholder=\"请输入标题\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"文章内容:\" prop=\"content\" class=\"editor\">\r\n            <m-quill-editor ref=\"myQuillEditor\" v-model=\"form2.content\"\r\n            :width=\"quill.width\" :getContent=\"onEditorChange\" :toolbar=\"quill.toolbar\"\r\n            :has-border=\"quill.border\" :zIndex=\"quill.zIndex\"\r\n            :sync-output=\"quill.syncOutput\" \r\n            :theme=\"quill.theme\"\r\n            :disabled=\"quill.disabled\"\r\n            :fullscreen=\"quill.full\"\r\n            @upload=\"uploadImg\" @blur=\"onEditorBlur($event)\"\r\n            ></m-quill-editor>\r\n          </el-form-item>\r\n        </div>\r\n        <div style=\"width: 35%;float:left;padding:15px;min-width:420px;\" >\r\n          <el-form-item label=\"发布到:\" required>\r\n            <el-input :disabled=\"true\" v-model=\"form2.classifyTypes\" style=\"width:173px;\"></el-input>\r\n          </el-form-item>\r\n          <el-row>\r\n            <el-col :span=\"14\">\r\n              <el-form-item label=\"来源:\" prop=\"sourceType\">\r\n                <el-radio-group v-model=\"form2.sourceType\">\r\n                  <el-radio label=\"1\" >原创</el-radio>\r\n                  <el-radio label=\"2\" >转载</el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"10\">\r\n              <el-form-item v-if=\"form2.sourceType == 2\" prop=\"source\" class=\"source_style\">\r\n                <el-select filterable v-model=\"form2.source\" placeholder=\"请选择转载来源\" style=\"margin-left:-68px;width:150px;\">\r\n                  <el-option\r\n                    v-for=\"item in cities\"\r\n                    :key=\"item.id\"\r\n                    :label=\"item.name\"\r\n                    :value=\"item.id\">\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"作者:\">\r\n\t\t\t\t\t\t<el-input v-model=\"form2.author\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n          <el-form-item label=\"所属分类:\" prop=\"classifyType\">\r\n            <el-select filterable v-model=\"form2.classifyType\" name=\"classifyType\" placeholder=\"请选择\">\r\n              <el-option\r\n                v-for=\"item in classifyTypeAll\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item class=\"fabuStyle\" label=\"发布账号:\" prop=\"userId\">\r\n            <el-select filterable v-model=\"form2.userId\" placeholder=\"请选择发布账号\">\r\n              <el-option \r\n                v-for=\"item in accounts\"\r\n                :key=\"item.userId\"\r\n                :label=\"item.nickName\"\r\n                :value=\"item.userId\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"附加选项:\" prop=\"imgType\" >\r\n              <el-radio-group v-model=\"form2.imgType\" @change=\"radioChange\">\r\n                  <el-radio label=\"1\">上传缩略图</el-radio>\r\n                  <el-radio label=\"2\">提取第一个图为缩略图</el-radio>\r\n              </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"封面图:\" prop=\"icon\" ref=\"icon\" v-show=\"form2.imgType == '1'\">\r\n            <el-upload\r\n              action=\"\" :multiple=\"false\" :limit='1'\r\n              ref=\"upload\" name=\"newsFile\" :file-list=\"fileList\"\r\n              list-type=\"picture-card\" :auto-upload=\"false\"\r\n              :on-change=\"fileChange\" :on-exceed=\"fileOver\"\r\n              :on-preview=\"handlePictureCardPreview\"\r\n              :on-remove=\"handleRemove\">\r\n              <i class=\"el-icon-plus\"></i>\r\n            </el-upload>\r\n            <el-dialog :visible.sync=\"dialogVisible\">\r\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n            </el-dialog>\r\n          </el-form-item>\r\n          <el-form-item label=\"Tag标签:\" prop=\"tagLabel\">\r\n              <el-input placeholder=\"用逗号隔开，单个标签少于12字节\" v-model=\"form2.tagLabel\"></el-input>\r\n          </el-form-item>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getBaceUrl } from '@/utils/auth';\r\nimport myVali from '@/utils/myVali'\r\nexport default {\r\n  data() {\r\n    var valiIcon = (rule, value, callback) => { // 图片验证\r\n      if (!this.hasFmt) {\r\n        callback(new Error('请上传封面图'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    var valiTag=(rule,value,callback) => {\r\n      if (value === '') {\r\n        callback();\r\n      } else {\r\n        var v = value.replace(/，/ig,',');\r\n        var arr = v.split(',');\r\n        arr.map(item => {\r\n          if(item.replace(/[^\\x00-\\xff]/g,\"aa\").length>12){\r\n            callback(new Error('单个tag标签不能超过12字节!'))\r\n          }else{\r\n            callback();\r\n          }\r\n        })\r\n      }\r\n    };\r\n    return {\r\n      argu:{},\r\n      hasFmt:false,\r\n      fileList:[],\r\n      accounts:[],\r\n      cities:[],\r\n      quill: {\r\n        width: 420,\r\n\t\t\t\tborder: true,\r\n\t\t\t\theight:150,\r\n\t\t\t\tzIndex:101,\r\n        content: 'wellcome ~',\r\n        syncOutput: true,\r\n        theme: 'snow', //bubble snow\r\n        disabled: false,\r\n        full: false,\r\n        toolbar: [\r\n          ['bold', 'italic', 'underline', 'strike', 'link', {'header': [1, 2, 3, 4, 5, 6, false]}],\r\n          ['blockquote', 'code-block'],\r\n          [{'list': 'ordered'}, {'list': 'bullet'}],\r\n          [{ 'script': 'sub'}, { 'script': 'super' }],\r\n          [{ 'indent': '-1'}, { 'indent': '+1' }],\r\n          [{'color': []}, {'background': []}],\r\n          [{ 'align': [false, 'right', 'center', 'justify'] }],\r\n          ['image', 'video'],\r\n        ]\r\n      },\r\n      baceUrl:'',\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      classifyTypeAll:'',\r\n      form2: {\r\n        title: '',\r\n        content: '',\r\n        classifyTypes: '行情',\r\n        author:'',\r\n        sourceType:'1',\r\n        userId: '',\r\n        imgType: '1',\r\n        tagLabel: '',\r\n        source:'',\r\n        type: [],\r\n        desc: '',\r\n        author: '',\r\n        img: '',\r\n        //未置顶\r\n        // topFlag:'0',\r\n//              排序\r\n        // orderNum:'0'\r\n      },\r\n      uploadData: {},\r\n\t    value: '',\r\n      rules2: {\r\n        title: [\r\n          {required:true, validator: myVali.checkTitle, trigger: 'blur' }  // 图片验证\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入内容', trigger: 'change' },\r\n          {pattern:/[0-9\\u4e00-\\u9fa5]+/g,message:'内容必须有中文或者数字',trigger:'blur'}\r\n        ],\r\n        userId: [\r\n          { required: true, message: '请选择发布账号', trigger: 'change' }\r\n        ],\r\n        imgType: [\r\n          { required: true, message: '请选择图片', trigger: 'change' }\r\n        ],\r\n        icon:[\r\n          {required:true, validator: valiIcon, trigger: 'change' }  // 图片验证\r\n        ],\r\n        sourceType: [\r\n            { required: true, message: '请选择来源', trigger: 'change'}\r\n          ],\r\n        source:[\r\n          {required: true, message: '请选择转载来源', trigger: 'change' }\r\n        ],\r\n        classifyType:[\r\n          { required: true, message: '请选择所属分类', trigger: 'blur' },\r\n        ],\r\n        tagLabel:[\r\n          { validator: valiTag, trigger: 'blur' }\r\n        ]\r\n      }  \r\n            \r\n    };\r\n\t},\r\n\t\tcreated(){\r\n      this.baceUrl = getBaceUrl();\r\n      this.argu=this.$route.params.argu;\r\n\t\t},\r\n    mounted() {\r\n      this.$get('reprintSth/findAll',{tokenId:this.$store.state.user.tokenId}).then(res => {\r\n    \t\t// console.log(res.data)\r\n    \t\tthis.cities = res.data\r\n      });\r\n    \tthis.$get('/industryCategory/findIndustryCategoryList',{tokenId:this.$store.state.user.tokenId}).then(res => {\r\n    \t\tconsole.log(res.data)\r\n    \t\tthis.classifyTypeAll = res.data\r\n    \t});\r\n    \t this.$post('members/findByLevel',{tokenId:this.$store.state.user.tokenId,levelCode:100002}).then(res => {\r\n        console.log(res)\r\n        this.accounts = res.data;\r\n      })\r\n    },\r\n    methods: {\r\n      radioChange(val){\r\n        console.log(val)\r\n        if(val == '2'){\r\n          this.hasFmt = true;\r\n        }else{\r\n          if(!this.fileList){\r\n            this.hasFmt=false;\r\n          }\r\n        }\r\n      },\r\n    \t// 富文本图片上传\r\n\t\t\tuploadImg(file,insert){\r\n\t\t\t\tconsole.log(file)\r\n\t\t\t\tlet params = new FormData(); // 创建form对象\r\n\t\t\t\tparams.append('file',file,file.name);\r\n\t\t\t\t// params.append('name',file.name);\r\n\t\t\t\tconsole.log(file.name)\r\n\t\t\t\t\r\n\t\t\t\tthis.$post('images/upload',params).then(res => {\r\n\t\t\t\t\tlet url = res.data[0].showUrl;\r\n\t\t\t\t\t// console.log(url)\r\n\t\t\t\t\tinsert(url, 'center')\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfileOver(){\r\n\t\t\t\tthis.$message('只允许添加一张图片,如果替换请删除后再上传');\r\n\t\t\t},\r\n\t\t\t//仅保存\r\n\t\t\tsaveAudit(formName, status) {\r\n\t\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\t\tconsole.log(valid);\r\n\t\t\t\t\tif (valid) {\r\n            if(this.form2.imgType == 2){\t// 封面图的类型 \r\n              var reg = /src=/ig;\r\n\t\t\t\t\t\t\tif(!this.form2.content.match(reg)){\r\n                 this.$message.error('内容里没有图片!');\r\n                 return;\r\n              }\r\n            }\r\n            let param = new FormData();\r\n            param.append('tokenId',this.$store.state.user.tokenId);\r\n            param.append('title',this.form2.title);  \r\n            param.append('content',this.form2.content);\r\n            param.append('userId',this.form2.userId);\r\n            param.append('imgType',this.form2.imgType);\r\n            param.append('author',this.form2.author);\r\n            param.append('sourceType',this.form2.sourceType);\r\n            param.append('tagLabel',this.form2.tagLabel.replace(/，/ig,','));\r\n            param.append('publishSource','1');\r\n            param.append('status',status);\r\n            param.append('classifyType',this.form2.classifyType);\r\n            if(this.form2.imgType == '1'){\r\n               param.append('newsFile',this.form2.file,this.form2.filename);\r\n            }\r\n             if(this.form2.sourceType=='2'){\r\n              param.append('source',this.form2.source)\r\n            }\r\n            this.$post('industry/save', param).then(res => {\r\n              if (res.code == 0) {\r\n                this.$message({\r\n                  message: res.msg,\r\n                  type: 'success'\r\n                });\r\n                setTimeout(() => {\r\n                  this.$router.push({\r\n                    name: 'market',\r\n                    params:{\r\n                      argu:this.argu\r\n                    }\r\n                  });\r\n                }, 1000);\r\n              }\r\n            });\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tconsole.log('error submit!!');\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t\t//图片的验证\r\n\t\t\tfileChange(file,fileList){\r\n        this.$refs['icon'].clearValidate(); // 图片验证\r\n        this.form2.filename = file.name;\r\n        this.form2.file = file.raw;\r\n\t\t\t\t// console.log(file)\r\n\t\t\t\tif(fileList.length>0){\r\n\t\t\t\t\tthis.hasFmt = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tonEditorBlur(quill) {\r\n\t\t\t\t\tconsole.log('editor blur!', quill);\r\n\t\t\t\t\tconsole.log(this.form2.content);\r\n\t\t\t},\r\n\t\t\tonEditorFocus(quill) {\r\n\t\t\t\t\tconsole.log('editor focus!', quill);\r\n\t\t\t},\r\n\t\t\tonEditorReady(quill) {\r\n\t\t\t\t\tconsole.log('editor ready!', quill);\r\n\t\t\t},\r\n\t\t\tonEditorChange({ quill, html, text }) {\r\n\t\t\t\t\tconsole.log('editor change!', quill, html, text);\r\n\t\t\t\t\tthis.content = html;\r\n\t\t\t},\r\n\t\t\t// 文件上传的删除  和放大!\r\n\t\t\thandleRemove(file, fileList) {\r\n\t\t\t\t\talert('删除');\r\n\t\t\t\t\tconsole.log(file, fileList);\r\n\t\t\t},\r\n\t\t\thandlePictureCardPreview(file) {\r\n\t\t\t\t\tthis.dialogImageUrl = file.url;\r\n\t\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t\t\tconsole.log(this.dialogImageUrl);\r\n\t\t\t\t\talert('放大');\r\n\t\t\t},\r\n\t\t\t fanhui(){\r\n        this.$confirm('返回已编辑内容将重置是否继续？')\r\n          .then(_ => {\r\n            this.$router.push({\r\n              name: 'market',\r\n              params: {\r\n                argu: this.argu\r\n              }\r\n            });\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n      }\r\n    },\r\n    beforeRouteLeave(to, from, next) {\r\n      to.meta.keepAlive = false;\r\n      next();\r\n    },\r\n};\r\n</script>\r\n<style type=\"text/css\">\r\n.market_add .el-upload--picture-card{\r\n\twidth: 80px;\r\n\theight: 80px;\r\n\tline-height: 88px;\r\n}\r\n.up_form .el-input__inner {\r\n    height: 30px;\r\n    line-height: 30px;\r\n    max-width: 300px;\r\n}\r\n.up_form .quill-editor .ql-container {\r\n    min-height: 550px;\r\n}\r\n/*.app-container .app-page-body{\r\n\t\tmin-height: 890px !important;\r\n\t}*/\r\n\t.quill-editor .ql-toolbar.ql-snow{\r\n\t\theight: 60px;\r\n\t}\r\n\t.editor .el-form-item__content {\r\n\t\tline-height: 20px;\r\n\t}\r\n\t\r\n\t.up_form .el-input__inner{\r\n\t\theight: 30px;\r\n\t\tline-height: 30px;\r\n\t\tmax-width: 300px;\r\n\t}\r\n\t.up_form .quill-editor .ql-container{\r\n\t\theight: 550px;\r\n\t\toverflow-y: auto;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/market-add-old.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-body market_add\",staticStyle:{\"min-width\":\"980px\"}},[_c('div',{staticClass:\"breadcrumb\",staticStyle:{\"padding\":\"8px\"}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"内容中心\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"发布内容\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"发布行情\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"text-right\"},[_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.fanhui}},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.saveAudit('form2',1)}}},[_vm._v(\"仅保存\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"light_btn\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.saveAudit('form2',2)}}},[_vm._v(\"保存并提交审核\")])],1),_vm._v(\" \"),_c('el-form',{ref:\"form2\",staticClass:\"up_form clearfix\",attrs:{\"model\":_vm.form2,\"label-width\":\"84px\",\"rules\":_vm.rules2}},[_c('div',{staticStyle:{\"width\":\"48%\",\"float\":\"left\",\"padding\":\"15px\",\"margin-left\":\"2%\",\"margin-right\":\"5%\"}},[_c('el-form-item',{attrs:{\"label\":\"文章标题:\",\"prop\":\"title\"}},[_c('el-input',{staticStyle:{\"width\":\"420px\"},attrs:{\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"请输入标题\"},model:{value:(_vm.form2.title),callback:function ($$v) {_vm.$set(_vm.form2, \"title\", $$v)},expression:\"form2.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"editor\",attrs:{\"label\":\"文章内容:\",\"prop\":\"content\"}},[_c('m-quill-editor',{ref:\"myQuillEditor\",attrs:{\"width\":_vm.quill.width,\"getContent\":_vm.onEditorChange,\"toolbar\":_vm.quill.toolbar,\"has-border\":_vm.quill.border,\"zIndex\":_vm.quill.zIndex,\"sync-output\":_vm.quill.syncOutput,\"theme\":_vm.quill.theme,\"disabled\":_vm.quill.disabled,\"fullscreen\":_vm.quill.full},on:{\"upload\":_vm.uploadImg,\"blur\":function($event){_vm.onEditorBlur($event)}},model:{value:(_vm.form2.content),callback:function ($$v) {_vm.$set(_vm.form2, \"content\", $$v)},expression:\"form2.content\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"width\":\"35%\",\"float\":\"left\",\"padding\":\"15px\",\"min-width\":\"420px\"}},[_c('el-form-item',{attrs:{\"label\":\"发布到:\",\"required\":\"\"}},[_c('el-input',{staticStyle:{\"width\":\"173px\"},attrs:{\"disabled\":true},model:{value:(_vm.form2.classifyTypes),callback:function ($$v) {_vm.$set(_vm.form2, \"classifyTypes\", $$v)},expression:\"form2.classifyTypes\"}})],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":14}},[_c('el-form-item',{attrs:{\"label\":\"来源:\",\"prop\":\"sourceType\"}},[_c('el-radio-group',{model:{value:(_vm.form2.sourceType),callback:function ($$v) {_vm.$set(_vm.form2, \"sourceType\", $$v)},expression:\"form2.sourceType\"}},[_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"原创\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"2\"}},[_vm._v(\"转载\")])],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[(_vm.form2.sourceType == 2)?_c('el-form-item',{staticClass:\"source_style\",attrs:{\"prop\":\"source\"}},[_c('el-select',{staticStyle:{\"margin-left\":\"-68px\",\"width\":\"150px\"},attrs:{\"filterable\":\"\",\"placeholder\":\"请选择转载来源\"},model:{value:(_vm.form2.source),callback:function ($$v) {_vm.$set(_vm.form2, \"source\", $$v)},expression:\"form2.source\"}},_vm._l((_vm.cities),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}))],1):_vm._e()],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"作者:\"}},[_c('el-input',{model:{value:(_vm.form2.author),callback:function ($$v) {_vm.$set(_vm.form2, \"author\", $$v)},expression:\"form2.author\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"所属分类:\",\"prop\":\"classifyType\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"name\":\"classifyType\",\"placeholder\":\"请选择\"},model:{value:(_vm.form2.classifyType),callback:function ($$v) {_vm.$set(_vm.form2, \"classifyType\", $$v)},expression:\"form2.classifyType\"}},_vm._l((_vm.classifyTypeAll),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}))],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"fabuStyle\",attrs:{\"label\":\"发布账号:\",\"prop\":\"userId\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择发布账号\"},model:{value:(_vm.form2.userId),callback:function ($$v) {_vm.$set(_vm.form2, \"userId\", $$v)},expression:\"form2.userId\"}},_vm._l((_vm.accounts),function(item){return _c('el-option',{key:item.userId,attrs:{\"label\":item.nickName,\"value\":item.userId}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"附加选项:\",\"prop\":\"imgType\"}},[_c('el-radio-group',{on:{\"change\":_vm.radioChange},model:{value:(_vm.form2.imgType),callback:function ($$v) {_vm.$set(_vm.form2, \"imgType\", $$v)},expression:\"form2.imgType\"}},[_c('el-radio',{attrs:{\"label\":\"1\"}},[_vm._v(\"上传缩略图\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"2\"}},[_vm._v(\"提取第一个图为缩略图\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form2.imgType == '1'),expression:\"form2.imgType == '1'\"}],ref:\"icon\",attrs:{\"label\":\"封面图:\",\"prop\":\"icon\"}},[_c('el-upload',{ref:\"upload\",attrs:{\"action\":\"\",\"multiple\":false,\"limit\":1,\"name\":\"newsFile\",\"file-list\":_vm.fileList,\"list-type\":\"picture-card\",\"auto-upload\":false,\"on-change\":_vm.fileChange,\"on-exceed\":_vm.fileOver,\"on-preview\":_vm.handlePictureCardPreview,\"on-remove\":_vm.handleRemove}},[_c('i',{staticClass:\"el-icon-plus\"})]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tag标签:\",\"prop\":\"tagLabel\"}},[_c('el-input',{attrs:{\"placeholder\":\"用逗号隔开，单个标签少于12字节\"},model:{value:(_vm.form2.tagLabel),callback:function ($$v) {_vm.$set(_vm.form2, \"tagLabel\", $$v)},expression:\"form2.tagLabel\"}})],1)],1)])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0985ceb3\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/market-add-old.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0985ceb3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./market-add-old.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./market-add-old.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./market-add-old.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0985ceb3\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./market-add-old.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/market-add-old.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}